<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 7.1.1"><link rel="apple-touch-icon" sizes="180x180" href="/images/favicon.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.png"><link rel="mask-icon" href="/images/favicon.png" color="#222"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Comfortaa:300,300italic,400,400italic,700,700italic|Ma Shan Zheng:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/pace-js@1/themes/blue/pace-theme-minimal.css"><script src="//cdn.jsdelivr.net/npm/pace-js@1/pace.min.js"></script><script id="hexo-configurations">var NexT=window.NexT||{},CONFIG={hostname:"amostian.github.io",root:"/",scheme:"Pisces",version:"7.8.0",exturl:!1,sidebar:{position:"left",display:"post",padding:18,offset:12,onmobile:!1},copycode:{enable:!0,show_result:!0,style:"mac"},back2top:{enable:!0,sidebar:!1,scrollpercent:!0},bookmark:{enable:!1,color:"#222",save:"auto"},fancybox:!0,mediumzoom:!1,lazyload:!1,pangu:!1,comments:{style:"tabs",active:null,storage:!0,lazyload:!1,nav:null},algolia:{hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}},localsearch:{enable:!0,trigger:"auto",top_n_per_article:1,unescape:!1,preload:!1},motion:{enable:!1,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},path:"search.xml"}</script><meta name="description" content="前置知识：JavaScript&amp;ES6"><meta property="og:type" content="article"><meta property="og:title" content="ReactJS"><meta property="og:url" content="https://amostian.github.io/posts/1473435732/index.html"><meta property="og:site_name" content="AmosTian"><meta property="og:description" content="前置知识：JavaScript&amp;ES6"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://amostian.github.io/posts/1473435732/image-20210303121125429.png"><meta property="og:image" content="https://amostian.github.io/posts/1473435732/image-20210304205330746.png"><meta property="og:image" content="https://amostian.github.io/posts/1473435732/image-20210304205508883.png"><meta property="og:image" content="https://amostian.github.io/posts/1473435732/image-20210304205523814.png"><meta property="og:image" content="https://amostian.github.io/posts/1473435732/image-20210304210815935.png"><meta property="og:image" content="https://amostian.github.io/posts/1473435732/image-20210304211207491.png"><meta property="og:image" content="https://amostian.github.io/posts/1473435732/image-20210305112349207.png"><meta property="og:image" content="https://amostian.github.io/posts/1473435732/image-20210305120758870.png"><meta property="og:image" content="https://amostian.github.io/posts/1473435732/image-20210304211837777.png"><meta property="og:image" content="https://amostian.github.io/posts/1473435732/image-20210305111724412.png"><meta property="og:image" content="https://amostian.github.io/posts/1473435732/image-20210305130049165.png"><meta property="og:image" content="https://amostian.github.io/posts/1473435732/image-20210305130101406.png"><meta property="og:image" content="https://amostian.github.io/posts/1473435732/image-20210305144709907.png"><meta property="og:image" content="https://amostian.github.io/posts/1473435732/image-20210305144721859.png"><meta property="og:image" content="https://amostian.github.io/posts/1473435732/image-20210305152624280.png"><meta property="og:image" content="https://amostian.github.io/posts/1473435732/image-20210306102735121.png"><meta property="og:image" content="https://amostian.github.io/posts/1473435732/image-20210307151731049.png"><meta property="og:image" content="https://amostian.github.io/posts/1473435732/image-20210307164322526.png"><meta property="og:image" content="https://amostian.github.io/posts/1473435732/image-20210307164838950.png"><meta property="og:image" content="https://amostian.github.io/posts/1473435732/image-20210308103631202.png"><meta property="og:image" content="https://amostian.github.io/posts/1473435732/image-20210308104219813.png"><meta property="og:image" content="https://amostian.github.io/posts/1473435732/image-20210308104852543.png"><meta property="og:image" content="https://amostian.github.io/posts/1473435732/image-20210308105554638.png"><meta property="og:image" content="https://amostian.github.io/posts/1473435732/image-20210308143825663.png"><meta property="og:image" content="https://amostian.github.io/posts/1473435732/image-20210308184316416.png"><meta property="og:image" content="https://amostian.github.io/posts/1473435732/image-20210308184840826.png"><meta property="og:image" content="https://amostian.github.io/posts/1473435732/image-20210308190126261.png"><meta property="og:image" content="https://amostian.github.io/posts/1473435732/image-20210308190715625.png"><meta property="og:image" content="https://amostian.github.io/posts/1473435732/image-20210308194346037.png"><meta property="og:image" content="https://amostian.github.io/posts/1473435732/image-20210308201912520.png"><meta property="og:image" content="https://amostian.github.io/posts/1473435732/image-20210308202410395.png"><meta property="og:image" content="https://amostian.github.io/posts/1473435732/image-20210308202603552.png"><meta property="og:image" content="https://amostian.github.io/posts/1473435732/image-20210308203308223.png"><meta property="og:image" content="https://amostian.github.io/posts/1473435732/image-20210308203424894.png"><meta property="og:image" content="https://amostian.github.io/posts/1473435732/image-20210308203637264.png"><meta property="og:image" content="https://amostian.github.io/posts/1473435732/image-20210308205111540.png"><meta property="og:image" content="https://amostian.github.io/posts/1473435732/image-20210308210249174.png"><meta property="og:image" content="https://amostian.github.io/posts/1473435732/image-20210308210729464.png"><meta property="og:image" content="https://amostian.github.io/posts/1473435732/image-20210308215053084.png"><meta property="article:published_time" content="2022-03-31T13:39:36.000Z"><meta property="article:modified_time" content="2023-03-23T15:48:54.320Z"><meta property="article:author" content="AmosTian"><meta property="article:tag" content="开发"><meta property="article:tag" content="前端工程"><meta property="article:tag" content="ReactJS"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://amostian.github.io/posts/1473435732/image-20210303121125429.png"><link rel="canonical" href="https://amostian.github.io/posts/1473435732/"><script id="page-configurations">CONFIG.page={sidebar:"",isHome:!1,isPost:!0,lang:"zh-CN"}</script><title>ReactJS | AmosTian</title><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-header,.use-motion .comments,.use-motion .menu-item,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript></head><body itemscope itemtype="http://schema.org/WebPage"><div class="container"><div class="headband"></div><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏"><span class="toggle-line toggle-line-first"></span> <span class="toggle-line toggle-line-middle"></span> <span class="toggle-line toggle-line-last"></span></div></div><div class="site-meta"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span><h1 class="site-title">AmosTian</h1><span class="logo-line-after"><i></i></span></a></div><div class="site-nav-right"><div class="toggle popup-trigger"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-fw fa-home"></i>首页</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i>分类<span class="badge">58</span></a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>标签<span class="badge">74</span></a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>归档<span class="badge">354</span></a></li><li class="menu-item menu-item-essay"><a href="/categories/%E9%9A%8F%E7%AC%94/" rel="section"><i class="fa fa-fw fa-pied-piper"></i>随笔</a></li><li class="menu-item menu-item-dynamic-resume"><a href="/dynamic-resume/" rel="section"><i class="fa fa-fw fa-cog"></i>动态简历</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索</a></li></ul></nav><div class="search-pop-overlay"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"><input autocomplete="off" autocapitalize="off" placeholder="搜索..." spellcheck="false" type="search" class="search-input"></div><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span></div><div id="search-result"><div id="no-result"><i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i></div></div></div></div></div></header><div class="back-to-top"><i class="fa fa-arrow-up"></i> <span>0%</span></div><div class="reading-progress-bar"></div><a href="https://github.com/AmosTian" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><main class="main"><div class="main-inner"><div class="content-wrap"><div class="content post posts-expand"><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://amostian.github.io/posts/1473435732/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.png"><meta itemprop="name" content="AmosTian"><meta itemprop="description" content="知道的越多，不知道的越多"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="AmosTian"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">ReactJS</h1><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间 2022-03-31 21:39:36" itemprop="dateCreated datePublished" datetime="2022-03-31T21:39:36+08:00">2022-03-31</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-check-o"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间 2023-03-23 23:48:54" itemprop="dateModified" datetime="2023-03-23T23:48:54+08:00">2023-03-23</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E5%BC%80%E5%8F%91/" itemprop="url" rel="index"><span itemprop="name">开发</span></a> </span>> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E5%BC%80%E5%8F%91/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B/" itemprop="url" rel="index"><span itemprop="name">前端工程</span></a></span></span><div class="post-symbolscount"><span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i> </span><span class="post-meta-item-text">本文字数 </span><span title="本文字数">7.3k字 </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-clock-o"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>26 分钟</span></span></div></div></header><div class="post-body" itemprop="articleBody"><blockquote><p>前置知识：<a href="https://amostian.github.io/posts/2797554274/">JavaScript&amp;ES6</a></p></blockquote><span id="more"></span><h1 id="ReactJS"><a href="#ReactJS" class="headerlink" title="ReactJS"></a>ReactJS</h1><h2 id="前端开发的四个阶段"><a href="#前端开发的四个阶段" class="headerlink" title="前端开发的四个阶段"></a>前端开发的四个阶段</h2><h3 id="1-静态页面阶段"><a href="#1-静态页面阶段" class="headerlink" title="1. 静态页面阶段"></a>1. 静态页面阶段</h3><p>在第一个阶段中前端页面都是静态的，所有前端代码和前端数据都是后端生成的，前端纯粹只是增加一些特殊效果。</p><p>后端MVC模式</p><ul><li>Model(模型层)：提供/保持数据</li><li>Controller(控制层)：数据处理，实现业务逻辑</li><li>View（视图层）：展示数据，提供用户界面</li></ul><p>此时的前端只是后端MVC中的V</p><h3 id="2-ajax阶段"><a href="#2-ajax阶段" class="headerlink" title="2. ajax阶段"></a>2. ajax阶段</h3><p>2004年AJAX诞生，改变了前端开发。Gmail和Google地图这样革命性产品出现，使前端的作用不再是展示页面，还可以管理数据并与用户互动</p><h3 id="3-前端MV阶段"><a href="#3-前端MV阶段" class="headerlink" title="3. 前端MV阶段"></a>3. 前端MV阶段</h3><p>把MVC模式照搬到了前端，只有 M(读写数据)和V(展示数据)，没有C(处理数据)</p><p>有些框架提出 MVVM模式，用View Model代替Controller。Model拿到数据后，View Model将数据处理成视图层(View)需要的格式</p><h3 id="4-SPA阶段"><a href="#4-SPA阶段" class="headerlink" title="4. SPA阶段"></a>4. SPA阶段</h3><p>前端可以做到读写数据，切换视图，用户交互。网页其实是一个应用程序，而不是信息的纯展示。这种单张网页的应用程序称为SPA(Single Page Application)</p><p>2010年后，前端工程师从开发页面(切模板)，逐渐变成了开发“前端应用”，跑在浏览器里面的应用</p><p>目前，流行的前端框架 <code>Vue</code>,<code>React</code>都属于SPA开发框架</p><h2 id="ReactJS-1"><a href="#ReactJS-1" class="headerlink" title="ReactJS"></a>ReactJS</h2><h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><p><img src="/posts/1473435732/image-20210303121125429.png" alt="image-20210303121125429"></p><p><a target="_blank" rel="noopener" href="https://reactjs.org/">官网</a></p><blockquote><p><strong>用于构建用户界面的JavaScript框架</strong>，由Facebook开发</p><p>ReactJS把复杂的页面，拆分成一个个的组件，将这些组件拼装起来，就会呈现一个页面</p></blockquote><p>ReactJS可用于MVC、MVVM等架构</p><h3 id="HelloWorld"><a href="#HelloWorld" class="headerlink" title="HelloWorld"></a>HelloWorld</h3><h4 id="1-新建static-web项目"><a href="#1-新建static-web项目" class="headerlink" title="1. 新建static web项目"></a>1. 新建static web项目</h4><p><img src="/posts/1473435732/image-20210304205330746.png" alt="image-20210304205330746"></p><h4 id="2-初始化项目-添加umi依赖"><a href="#2-初始化项目-添加umi依赖" class="headerlink" title="2. 初始化项目,添加umi依赖"></a>2. 初始化项目,添加umi依赖</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tyarn init -y</span><br></pre></td></tr></table></figure><p><img src="/posts/1473435732/image-20210304205508883.png" alt="image-20210304205508883"></p><p><img src="/posts/1473435732/image-20210304205523814.png" alt="image-20210304205523814"></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tyarn add umi --dev</span><br></pre></td></tr></table></figure><h4 id="3-编写HelloWorld程序"><a href="#3-编写HelloWorld程序" class="headerlink" title="3.  编写HelloWorld程序"></a>3. 编写HelloWorld程序</h4><h5 id="在工程的根目录下新建config-config-js"><a href="#在工程的根目录下新建config-config-js" class="headerlink" title="在工程的根目录下新建config/config.js"></a>在工程的根目录下新建<code>config/config.js</code></h5><p>在UmiJS的约定中，config/config.js将作为UmiJS的全局配置文件</p><p><img src="/posts/1473435732/image-20210304210815935.png" alt="image-20210304210815935"></p><p>在Umi中，约定的目录结构如下：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">    ├── dist/                          // 默认的 build 输出目录</span><br><span class="line">    ├── mock/                          // mock 文件所在目录，基于 express</span><br><span class="line">    ├── config/</span><br><span class="line">        ├── config.js                  // umi 配置，同 .umirc.js，二选一</span><br><span class="line">    └── src/                           // 源码目录，可选</span><br><span class="line">        ├── layouts/index.js           // 全局布局</span><br><span class="line">        ├── pages/                     // 页面目录，里面的文件即路由</span><br><span class="line">            ├── .umi/                  // dev 临时目录，需添加到 .gitignore</span><br><span class="line">            ├── .umi-production/       // build 临时目录，会自动删除</span><br><span class="line">            ├── document.ejs           // HTML 模板</span><br><span class="line">            ├── 404.js                 // 404 页面</span><br><span class="line">            ├── page1.js               // 页面 1，任意命名，导出 react 组件</span><br><span class="line">            ├── page1.test.js          // 用例文件，umi test 会匹配所有 .test.js 和 .e2e.js 结尾的文件</span><br><span class="line">            └── page2.js               // 页面 2，任意命名</span><br><span class="line">        ├── global.css                 // 约定的全局样式文件，自动引入，也可以用 global.less</span><br><span class="line">        ├── global.js                  // 可以在这里加入 polyfill</span><br><span class="line">        ├── app.js                     // 运行时配置文件</span><br><span class="line">    ├── .umirc.js                      // umi 配置，同 config/config.js，二选一</span><br><span class="line">    ├── .env                           // 环境变量</span><br><span class="line">    └── package.json</span><br></pre></td></tr></table></figure><p>在config.js文件中输入，以便后面使用：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//导出一个对象，暂时设置为空对象，后面再填充内容</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span>&#123;&#125;;</span><br></pre></td></tr></table></figure><h5 id="创建HelloWorld-js页面文件"><a href="#创建HelloWorld-js页面文件" class="headerlink" title="创建HelloWorld.js页面文件"></a>创建HelloWorld.js页面文件</h5><p>在Umi中，约定存放页面代码的文件夹在 <code>src/pages</code> ，可以通过 <code>singular:false</code>来设置单数的命名方式</p><p><img src="/posts/1473435732/image-20210304211207491.png" alt="image-20210304211207491"></p><p>在HelloWorld.js中输入如下内容：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> () =&gt; &#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>hello world<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="构建和部署"><a href="#构建和部署" class="headerlink" title="构建和部署"></a>构建和部署</h5><p>我们写的js，必须通过umi先转码后才能正常执行。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">umi build</span><br></pre></td></tr></table></figure><p><img src="/posts/1473435732/image-20210305112349207.png" alt="image-20210305112349207"></p><p><img src="/posts/1473435732/image-20210305120758870.png" alt="image-20210305120758870"></p><h5 id="启动服务，查看页面效果"><a href="#启动服务，查看页面效果" class="headerlink" title="启动服务，查看页面效果"></a>启动服务，查看页面效果</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">启动服务</span></span><br><span class="line">umi dev</span><br></pre></td></tr></table></figure><p>可以看到，通过 <code>/HelloWorld</code> 即可访问到刚写的HelloWorld.js文件</p><p>在umi中，可以使用约定式的路由，将在pages下的JS文件都会按照文件名映射到一个路由</p><p><img src="/posts/1473435732/image-20210304211837777.png" alt="image-20210304211837777"></p><h5 id="添加-umi-plugin-react-插件"><a href="#添加-umi-plugin-react-插件" class="headerlink" title="添加 umi-plugin-react 插件"></a>添加 <code>umi-plugin-react</code> 插件</h5><blockquote><p>umi-plugin-react插件是umi官方基于react封装的插件</p></blockquote><p><a target="_blank" rel="noopener" href="https://umijs.org/zh-CN/docs/upgrade-to-umi-3">链接</a></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">添加插件</span></span><br><span class="line">tyarn add @umijs/preset-react --dev</span><br></pre></td></tr></table></figure><p><img src="/posts/1473435732/image-20210305111724412.png" alt="image-20210305111724412"></p><p>在config.js中引入该插件</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span>&#123;</span><br><span class="line">    <span class="attr">dva</span>: &#123;&#125;,</span><br><span class="line">    <span class="attr">antd</span>: &#123;&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="JSX语法"><a href="#JSX语法" class="headerlink" title="JSX语法"></a>JSX语法</h3><p>JSX语法就是，可以在js文件中插入html片段，是React自创的一种语法</p><p>JSX语法会被Babel等转码工具进行转码，得到正常的js代码再执行</p><p><strong>注意</strong></p><ol><li><p>所有的html标签必须是闭合的</p></li><li><p>在JSX语法中，只能有<strong>一个根标签</strong>，不能有多个</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> div1 = <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">div</span>&gt;</span>hello<span class="tag">&lt;/<span class="name">div</span>&gt;</span> <span class="tag">&lt;<span class="name">div</span>&gt;</span>world<span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><span class="comment">//正确</span></span><br><span class="line"><span class="keyword">const</span> div2 = <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>hello<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>world<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span> <span class="comment">//错误</span></span><br></pre></td></tr></table></figure></li><li><p>在JSX语法中，如果想要在html标签中插入js脚本，需要通过 <code>&#123;&#125;</code> 插入js脚本</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="title function_">default</span>()=&gt;&#123;</span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">fun</span> = (<span class="params"></span>) =&gt;<span class="string">&quot;黑马程序&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;fun()&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span> <span class="tag">&lt;<span class="name">div</span>&gt;</span>hello world<span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ol><h3 id="组件"><a href="#组件" class="headerlink" title="组件"></a>组件</h3><h4 id="1-自定义组件"><a href="#1-自定义组件" class="headerlink" title="1. 自定义组件"></a>1. 自定义组件</h4><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="comment">//1. 导入React</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">HelloWorld</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span>&#123;</span><br><span class="line"><span class="comment">//2. 继承React.Component</span></span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>)&#123;<span class="comment">//3. 重写render()方法，用于渲染页面</span></span><br><span class="line">        <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>Hello World<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//4. 导出该类</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">HelloWorld</span>;</span><br></pre></td></tr></table></figure><h4 id="2-导入自定义组件"><a href="#2-导入自定义组件" class="headerlink" title="2. 导入自定义组件"></a>2. 导入自定义组件</h4><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">HelloWorld</span> <span class="keyword">from</span> <span class="string">&quot;./HelloWorld&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Show</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span>&#123;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">HelloWorld</span>&gt;</span><span class="tag">&lt;/<span class="name">HelloWorld</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Show</span>;</span><br></pre></td></tr></table></figure><h4 id="组件参数"><a href="#组件参数" class="headerlink" title="组件参数"></a>组件参数</h4><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="comment">//1. 导入React</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">HelloWorld</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span>&#123;</span><br><span class="line"><span class="comment">//2. 继承React.Component</span></span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>)&#123;<span class="comment">//3. 重写render()方法，用于渲染页面</span></span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">div</span>&gt;</span>Hello World<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">div</span>&gt;</span>lastName=&#123;this.props.lastName&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;this.props.children&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//4. 导出该类</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">HelloWorld</span>;</span><br></pre></td></tr></table></figure><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="title class_">HelloWorld</span> <span class="keyword">from</span> <span class="string">&quot;./HelloWorld&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Show</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span>&#123;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">HelloWorld</span> <span class="attr">lastName</span>=<span class="string">&#123;</span>&quot;<span class="attr">Auspice</span>&quot;&#125;&gt;</span>Tian<span class="tag">&lt;/<span class="name">HelloWorld</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Show</span>;</span><br></pre></td></tr></table></figure><p><img src="/posts/1473435732/image-20210305130049165.png" alt="image-20210305130049165"></p><p><img src="/posts/1473435732/image-20210305130101406.png" alt="image-20210305130101406"></p><h4 id="组件的状态"><a href="#组件的状态" class="headerlink" title="组件的状态"></a>组件的状态</h4><p>每一个 <strong>页面组件</strong> 都有一个状态，其保存在 <code>this.state</code> 中，当状态值发生变化时，React框架会自动调用 <code>render()</code> 方法，重新渲染画面</p><p><strong>注意</strong></p><ul><li>this.state值的设置要在构造参数中完成，不能直接对 <code>this.state</code> 修改</li><li>要修改this.state的值，需要调用 <code>this.setState()</code> 完成</li></ul><p>案例：用过点击按钮，不断更新this.state，从而反映到页面</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Test</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span>&#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">props</span>) &#123;<span class="comment">//构造函数中必须有props参数</span></span><br><span class="line">        <span class="variable language_">super</span>(props);<span class="comment">//调用父类构造方法</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">state</span> = &#123;<span class="comment">//初始化state</span></span><br><span class="line">            <span class="attr">dataList</span>:[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],</span><br><span class="line">            <span class="attr">maxItem</span>:<span class="number">3</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                    &#123;//遍历值</span></span><br><span class="line"><span class="language-xml">                        this.state.dataList.map((value, index) =&gt; &#123;</span></span><br><span class="line"><span class="language-xml">                            return <span class="tag">&lt;<span class="name">li</span> <span class="attr">key</span>=<span class="string">&#123;index&#125;</span>&gt;</span>&#123;value&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                        &#125;)</span></span><br><span class="line"><span class="language-xml">                    &#125;</span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span>=&gt;</span>&#123;//为按钮添加点击事件</span></span><br><span class="line"><span class="language-xml">                    let maxItem = this.state.maxItem+1;</span></span><br><span class="line"><span class="language-xml">                    let newArr = [...this.state.dataList,maxItem]</span></span><br><span class="line"><span class="language-xml">                    this.setState(&#123;</span></span><br><span class="line"><span class="language-xml">                        dataList:newArr,</span></span><br><span class="line"><span class="language-xml">                        maxItem:maxItem</span></span><br><span class="line"><span class="language-xml">                    &#125;)</span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">                &#125;&#125;&gt;加一<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Test</span>;</span><br></pre></td></tr></table></figure><p><img src="/posts/1473435732/image-20210305144709907.png" alt="image-20210305144709907"></p><p><img src="/posts/1473435732/image-20210305144721859.png" alt="image-20210305144721859"></p><h4 id="生命周期"><a href="#生命周期" class="headerlink" title="生命周期"></a>生命周期</h4><p>组件运行过程中，存在不同的阶段。React为这些阶段提供了钩子方法(生命周期方法lifestyle methods)，允许开发者自定义每个阶段自动执行的函数。</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>; <span class="comment">//第一步，导入React</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">LifeCycle</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">	<span class="title function_">constructor</span>(<span class="params">props</span>) &#123;</span><br><span class="line">    <span class="variable language_">super</span>(props);</span><br><span class="line">    <span class="comment">//构造方法</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;constructor()&quot;</span>);</span><br><span class="line">	&#125; </span><br><span class="line">    </span><br><span class="line">    <span class="title function_">componentDidMount</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="comment">//组件挂载后调用</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;componentDidMount()&quot;</span>);</span><br><span class="line">	&#125; </span><br><span class="line">    </span><br><span class="line">    <span class="title function_">componentWillUnmount</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="comment">//在组件从 DOM 中移除之前立刻被调用。</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;componentWillUnmount()&quot;</span>);</span><br><span class="line">    &#125; </span><br><span class="line">    </span><br><span class="line">    <span class="title function_">componentDidUpdate</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="comment">//在组件完成更新后立即调用。在初始化时不会被调用。</span></span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;componentDidUpdate()&quot;</span>);</span><br><span class="line">    &#125; </span><br><span class="line">    <span class="title function_">shouldComponentUpdate</span>(<span class="params">nextProps, nextState</span>)&#123;</span><br><span class="line">        <span class="comment">// 每当this.props或this.state有变化，在render方法执行之前，就会调用这个方法。</span></span><br><span class="line">        <span class="comment">// 该方法返回一个布尔值，表示是否应该继续执行render方法，即如果返回false，UI 就不会更新，默认返回true。</span></span><br><span class="line">        <span class="comment">// 组件挂载时，render方法的第一次执行，不会调用这个方法。</span></span><br><span class="line">    	<span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;shouldComponentUpdate()&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">        <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>React Life Cycle!<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">        );</span><br><span class="line">	&#125;</span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">LifeCycle</span>;</span><br></pre></td></tr></table></figure><p><img src="/posts/1473435732/image-20210305152624280.png" alt="image-20210305152624280"></p><h3 id="Model"><a href="#Model" class="headerlink" title="Model"></a>Model</h3><p><strong>分层</strong></p><p><img src="/posts/1473435732/image-20210306102735121.png" alt="image-20210306102735121"></p><p>服务端系统：</p><ul><li>Controller负责与用户直接打交道，渲染页面、提供接口等，侧重于展示型逻辑</li><li>Service负责处理业务逻辑，供Controller层调用</li><li>DataAccess 层负责与数据源对接，进行纯粹的数据读写，供Service层调用</li></ul><p>前端代码结构：</p><ul><li>Page负责与用户直接打交道：侧重于展示型交互逻辑<ul><li>渲染页面</li><li>接受用户的操作输入</li></ul></li><li>Model负责处理业务逻辑，为Page做数据、状态的读写、变换、暂存等</li><li>Service负责与HTTP接口对接，进行纯粹的数据读写</li></ul><h4 id="使用dva进行数据分层管理"><a href="#使用dva进行数据分层管理" class="headerlink" title="使用dva进行数据分层管理"></a>使用dva进行数据分层管理</h4><p><a target="_blank" rel="noopener" href="https://dvajs.com/">dva官网</a></p><p><a target="_blank" rel="noopener" href="https://umijs.org/zh-CN/plugins/plugin-dva">umi-dva插件</a></p><p><code>@Connect(mapModelToProps,mapDispatcherToProps)</code>：将model层中数据及函数绑定到page层</p><ol><li>mapModelToProps：<ul><li>将page层和model层进行连接</li><li>返回model中的数据</li><li>将返回的<strong>数据</strong>绑定到this.props中</li></ul></li><li>mapDispatcherToProps<ul><li>将定义的<strong>函数</strong>绑定到this.props中</li><li>调用model层(reducers)中定义的函数</li></ul></li></ol><h5 id="1-引入dva框架"><a href="#1-引入dva框架" class="headerlink" title="1. 引入dva框架"></a>1. 引入dva框架</h5><p>umi对dva进行了整合，在 <strong>config.js</strong> 中进行配置：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="attr">dva</span>: &#123;</span><br><span class="line">        <span class="attr">immer</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">hmr</span>: <span class="literal">false</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h5 id="2-创建model文件"><a href="#2-创建model文件" class="headerlink" title="2. 创建model文件"></a>2. 创建model文件</h5><p>umi中，约定 <strong>src/models</strong> 文件夹中定义model</p><p><img src="/posts/1473435732/image-20210307151731049.png" alt="image-20210307151731049"></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="attr">namespace</span>:<span class="string">&#x27;TestData&#x27;</span>,</span><br><span class="line">    <span class="attr">state</span>:&#123;</span><br><span class="line">        <span class="attr">dataList</span>:[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],</span><br><span class="line">        <span class="attr">maxItem</span>:<span class="number">3</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="3-将model层数据导入page层"><a href="#3-将model层数据导入page层" class="headerlink" title="3. 将model层数据导入page层"></a>3. 将model层数据导入page层</h5><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;connect&#125; <span class="keyword">from</span> <span class="string">&quot;umi&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> namespace = <span class="string">&quot;TestData&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// connect第一个回调函数，作用：将page层和model层进行链接，返回model层中的数据，并将数据绑定到 this.props</span></span><br><span class="line">@<span class="title function_">connect</span>(<span class="function">(<span class="params">dvaState</span>)=&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        <span class="attr">dataList</span>:dvaState[namespace].<span class="property">dataList</span>,</span><br><span class="line">        <span class="attr">maxItem</span>: dvaState[namespace].<span class="property">maxItem</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Test</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span>&#123;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                    &#123;//遍历值</span></span><br><span class="line"><span class="language-xml">                        this.props.dataList.map((value, index) =&gt; &#123;</span></span><br><span class="line"><span class="language-xml">                            return <span class="tag">&lt;<span class="name">li</span> <span class="attr">key</span>=<span class="string">&#123;index&#125;</span>&gt;</span>&#123;value&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                        &#125;)</span></span><br><span class="line"><span class="language-xml">                    &#125;</span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">            </span><br><span class="line">            ...</span><br><span class="line">            );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Test</span>;</span><br></pre></td></tr></table></figure><p><strong>流程</strong></p><ol><li>umi框架启动，会自动读取<strong>models</strong>目录下文件</li><li>@Connect修饰符的第一个参数，接受一个方法，该方法必须返回 <code>&#123;&#125;(对象)</code>，将接收到model数据</li><li>全局model中，通过 <code>namespace</code> 进行区分，所以通过 <code>state[namespace]</code> 进行数据获取</li><li>返回的数据会被封装到 <code>this.props</code> 中，所以通过 <code>this.props.data</code> 获取到model中的数据</li></ol><h5 id="4-更新model中定义的数据"><a href="#4-更新model中定义的数据" class="headerlink" title="4. 更新model中定义的数据"></a>4. 更新model中定义的数据</h5><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="attr">namespace</span>:<span class="string">&#x27;TestData&#x27;</span>,</span><br><span class="line">    <span class="attr">state</span>:&#123;</span><br><span class="line">        <span class="attr">dataList</span>:[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],</span><br><span class="line">        <span class="attr">maxItem</span>:<span class="number">3</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">reducers</span>:&#123;<span class="comment">//定义一些函数</span></span><br><span class="line">        <span class="attr">addNewData</span>:<span class="keyword">function</span> (<span class="params">state</span>)&#123;<span class="comment">//state为修改前state</span></span><br><span class="line">            <span class="keyword">let</span> maxItem = state.<span class="property">maxItem</span>+<span class="number">1</span>;</span><br><span class="line">            <span class="keyword">let</span> newArr = [...state.<span class="property">dataList</span>,maxItem]</span><br><span class="line">            <span class="keyword">return</span> &#123;<span class="comment">//通过return返回更新后的数据</span></span><br><span class="line">                <span class="attr">dataList</span>:newArr,</span><br><span class="line">                <span class="attr">maxItem</span>:maxItem</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;connect&#125; <span class="keyword">from</span> <span class="string">&quot;umi&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> namespace = <span class="string">&quot;TestData&quot;</span>;</span><br><span class="line"></span><br><span class="line">@<span class="title function_">connect</span>(</span><br><span class="line">    <span class="function">(<span class="params">dvaState</span>)=&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="attr">dataList</span>:dvaState[namespace].<span class="property">dataList</span>,</span><br><span class="line">            <span class="attr">maxItem</span>: dvaState[namespace].<span class="property">maxItem</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function">(<span class="params">dvaDispatch</span>)=&gt;</span>&#123;</span><br><span class="line">        <span class="comment">//dvaDispatch : 可以调用model层定义的函数</span></span><br><span class="line">        <span class="keyword">return</span>&#123;</span><br><span class="line">            <span class="attr">add</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">                <span class="title function_">dvaDispatch</span>(&#123;</span><br><span class="line">                <span class="comment">//通过dvaDispatcher调用model层定义的函数</span></span><br><span class="line">                <span class="comment">//@param : type——指定函数名 </span></span><br><span class="line">                    <span class="comment">//namespace/函数名</span></span><br><span class="line">                    <span class="attr">type</span>:namespace+<span class="string">&quot;/addNewData&quot;</span></span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">)</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Test</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">ul</span>&gt;</span>&#123;//遍历值</span></span><br><span class="line"><span class="language-xml">                     this.props.dataList.map((value, index) =&gt; &#123;</span></span><br><span class="line"><span class="language-xml">                         return <span class="tag">&lt;<span class="name">li</span> <span class="attr">key</span>=<span class="string">&#123;index&#125;</span>&gt;</span>&#123;value&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                     &#125;)</span></span><br><span class="line"><span class="language-xml">                &#125;</span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span>=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-xml">                    this.props.add();</span></span><br><span class="line"><span class="language-xml">                &#125;&#125;&gt;加一<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Test</span>;</span><br></pre></td></tr></table></figure><h4 id="Model中异步请求数据"><a href="#Model中异步请求数据" class="headerlink" title="Model中异步请求数据"></a>Model中异步请求数据</h4><h5 id="1-请求工具类"><a href="#1-请求工具类" class="headerlink" title="1. 请求工具类"></a>1. 请求工具类</h5><p><code>src/utils</code> 目录下创建 <code>request.js</code> ，用于异步请求数据</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">checkStatus</span>(<span class="params">response</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (response.<span class="property">status</span> &gt;= <span class="number">200</span> &amp;&amp; response.<span class="property">status</span> &lt; <span class="number">300</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> response;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> error = <span class="keyword">new</span> <span class="title class_">Error</span>(response.<span class="property">statusText</span>);</span><br><span class="line">    error.<span class="property">response</span> = response;</span><br><span class="line">    <span class="keyword">throw</span> error;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* Requests a URL, returning a promise.</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> &#123;<span class="type">string</span>&#125; url The URL we want to request</span></span><br><span class="line"><span class="comment">* <span class="doctag">@param</span> &#123;<span class="type">object</span>&#125; [options] The options we want to pass to &quot;fetch&quot;</span></span><br><span class="line"><span class="comment">* <span class="doctag">@return</span> &#123;<span class="type">object</span>&#125; An object containing either &quot;data&quot; or &quot;err&quot;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">request</span>(<span class="params">url, options</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">fetch</span>(url, options);</span><br><span class="line">    <span class="title function_">checkStatus</span>(response);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">await</span> response.<span class="title function_">json</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="2-model层添加异步请求"><a href="#2-model层添加异步请求" class="headerlink" title="2. model层添加异步请求"></a>2. model层添加异步请求</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;../utils/request&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="attr">namespace</span>:<span class="string">&#x27;TestData&#x27;</span>,</span><br><span class="line">    <span class="attr">state</span>:&#123;</span><br><span class="line">        <span class="attr">dataList</span>:[],</span><br><span class="line">        <span class="attr">maxItem</span>:<span class="number">0</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">reducers</span>:&#123;<span class="comment">//定义一些函数</span></span><br><span class="line">        <span class="attr">addNewData</span>:<span class="keyword">function</span> (<span class="params">state,result</span>)&#123;</span><br><span class="line">            <span class="comment">//state为修改前state,result就是拿到的结果数据</span></span><br><span class="line">            <span class="keyword">if</span>(result.<span class="property">data</span>)&#123;</span><br><span class="line">            <span class="comment">//如果data存在，说明是初始化数据，直接返回</span></span><br><span class="line">                <span class="keyword">return</span> result.<span class="property">data</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">let</span> maxItem = state.<span class="property">maxItem</span>+<span class="number">1</span>;</span><br><span class="line">            <span class="keyword">let</span> newArr = [...state.<span class="property">dataList</span>,maxItem]</span><br><span class="line">            <span class="keyword">return</span> &#123;<span class="comment">//通过return返回更新后的数据</span></span><br><span class="line">                <span class="attr">dataList</span>:newArr,</span><br><span class="line">                <span class="attr">maxItem</span>:maxItem</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">effects</span>: &#123; <span class="comment">//新增effects配置，用于异步加载数据</span></span><br><span class="line">        *<span class="title function_">initData</span>(<span class="params">params, sagaEffects</span>) &#123; </span><br><span class="line">            <span class="comment">//*表示 定义异步方法</span></span><br><span class="line">            <span class="keyword">const</span> &#123;call, put&#125; = sagaEffects; </span><br><span class="line">            <span class="comment">//获取到call、put方法</span></span><br><span class="line">            <span class="keyword">const</span> url = <span class="string">&quot;/ds/list&quot;</span>; <span class="comment">// 定义请求的url</span></span><br><span class="line">            <span class="keyword">let</span> data = <span class="keyword">yield</span> <span class="title function_">call</span>(request, url); <span class="comment">//执行请求</span></span><br><span class="line">            <span class="keyword">yield</span> <span class="title function_">put</span>(&#123; <span class="comment">// 调用reducers中的方法</span></span><br><span class="line">                type : <span class="string">&quot;addNewData&quot;</span>, <span class="comment">//指定方法名</span></span><br><span class="line">                data : data <span class="comment">//传递ajax回来的数据</span></span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="3-绑定model调用异步请求"><a href="#3-绑定model调用异步请求" class="headerlink" title="3. 绑定model调用异步请求"></a>3. 绑定model调用异步请求</h5><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;connect&#125; <span class="keyword">from</span> <span class="string">&quot;umi&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> namespace = <span class="string">&quot;TestData&quot;</span>;</span><br><span class="line"></span><br><span class="line">@<span class="title function_">connect</span>(</span><br><span class="line">    <span class="function">(<span class="params">dvaState</span>)=&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="attr">dataList</span>:dvaState[namespace].<span class="property">dataList</span>,</span><br><span class="line">            <span class="attr">maxItem</span>: dvaState[namespace].<span class="property">maxItem</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function">(<span class="params">dvaDispatch</span>)=&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">return</span>&#123;</span><br><span class="line">            <span class="attr">add</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;</span><br><span class="line">                <span class="title function_">dvaDispatch</span>(&#123;</span><br><span class="line">                    <span class="attr">type</span>:namespace+<span class="string">&quot;/addNewData&quot;</span></span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">initData</span>:<span class="function">()=&gt;</span>&#123;</span><br><span class="line">                <span class="title function_">dvaDispatch</span>(&#123;</span><br><span class="line">                    <span class="attr">type</span>:namespace+<span class="string">&quot;/initData&quot;</span></span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">)</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Test</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span>&#123;</span><br><span class="line">    <span class="title function_">componentDidMount</span>(<span class="params"></span>) &#123;<span class="comment">//组件加载完后进行初始化操作</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">props</span>.<span class="title function_">initData</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                    &#123;//遍历值</span></span><br><span class="line"><span class="language-xml">                        this.props.dataList.map((value, index) =&gt; &#123;</span></span><br><span class="line"><span class="language-xml">                            return <span class="tag">&lt;<span class="name">li</span> <span class="attr">key</span>=<span class="string">&#123;index&#125;</span>&gt;</span>&#123;value&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                        &#125;)</span></span><br><span class="line"><span class="language-xml">                    &#125;</span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">button</span> <span class="attr">onClick</span>=<span class="string">&#123;()</span>=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-xml">                    this.props.add();</span></span><br><span class="line"><span class="language-xml">                &#125;&#125;&gt;加一<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">Test</span>;</span><br></pre></td></tr></table></figure><p><img src="/posts/1473435732/image-20210307164322526.png" alt="image-20210307164322526"></p><p>原因：</p><p>返回的数据不是json格式，解析出错</p><h5 id="4-moke数据"><a href="#4-moke数据" class="headerlink" title="4. moke数据"></a>4. moke数据</h5><blockquote><p>Mock 数据是前端开发过程中必不可少的一环，是分离前后端开发的关键链路。通过预先跟服务器端约定好的接口，模拟请求数据甚至逻辑，能够让前端开发独立自主，不会被服务端的开发所阻塞。</p></blockquote><p>umi中支持对请求的模拟</p><p>在项目根目录下创建 <code>mock</code> 目录，创建 <code>MockTestData.js</code> 文件</p><p><img src="/posts/1473435732/image-20210307164838950.png" alt="image-20210307164838950"></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="string">&#x27;GET /ds/test&#x27;</span>: <span class="keyword">function</span> (<span class="params">req, res</span>) &#123; <span class="comment">//模拟请求返回数据</span></span><br><span class="line">        res.<span class="title function_">json</span>(&#123;<span class="comment">//返回</span></span><br><span class="line">            <span class="attr">dataList</span>: [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>],</span><br><span class="line">            <span class="attr">maxItem</span>: <span class="number">4</span></span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&#x27;../utils/request&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="attr">namespace</span>:<span class="string">&#x27;TestData&#x27;</span>,</span><br><span class="line">    <span class="attr">state</span>:&#123;</span><br><span class="line">        <span class="attr">dataList</span>:[],</span><br><span class="line">        <span class="attr">maxItem</span>:<span class="number">0</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">reducers</span>:&#123;</span><br><span class="line">        <span class="attr">addNewData</span>:<span class="keyword">function</span> (<span class="params">state,result</span>)&#123;</span><br><span class="line">            <span class="keyword">if</span>(result.<span class="property">data</span>)&#123;<span class="comment">//判断result中的data是否存在，如果存在，说明是初始化数据，直接返回</span></span><br><span class="line">                <span class="comment">/*</span></span><br><span class="line"><span class="comment">                mock: 若响应中的字段名与page层的属性不一致，需要做映射</span></span><br><span class="line"><span class="comment">                return &#123;</span></span><br><span class="line"><span class="comment">                    dataList:result.data.data,</span></span><br><span class="line"><span class="comment">                    maxItem:result.data.maxNum</span></span><br><span class="line"><span class="comment">                &#125;</span></span><br><span class="line"><span class="comment">                */</span></span><br><span class="line">                <span class="keyword">return</span> result.<span class="property">data</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">let</span> maxItem = state.<span class="property">maxItem</span>+<span class="number">1</span>;</span><br><span class="line">            <span class="keyword">let</span> newArr = [...state.<span class="property">dataList</span>,maxItem]</span><br><span class="line">            <span class="keyword">return</span> &#123;</span><br><span class="line">                <span class="attr">dataList</span>:newArr,</span><br><span class="line">                <span class="attr">maxItem</span>:maxItem</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">effects</span>: &#123; </span><br><span class="line">        *<span class="title function_">initData</span>(<span class="params">params, sagaEffects</span>) &#123; </span><br><span class="line">            <span class="keyword">const</span> &#123;call, put&#125; = sagaEffects;</span><br><span class="line">            <span class="keyword">const</span> url = <span class="string">&quot;/ds/test&quot;</span>; </span><br><span class="line"></span><br><span class="line">            <span class="keyword">let</span> data = <span class="keyword">yield</span> <span class="title function_">call</span>(request, url); </span><br><span class="line">            <span class="keyword">yield</span> <span class="title function_">put</span>(&#123; </span><br><span class="line">                type : <span class="string">&quot;addNewData&quot;</span>, </span><br><span class="line">                data : data </span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="umi-model-注册"><a href="#umi-model-注册" class="headerlink" title="umi - model 注册"></a>umi - model 注册</h4><h5 id="model示例"><a href="#model示例" class="headerlink" title="model示例"></a>model示例</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">namespace</span>: <span class="string">&#x27;&#x27;</span>, <span class="comment">// 表示在全局 state 上的 key</span></span><br><span class="line">  <span class="attr">state</span>: &#123;&#125;, <span class="comment">// 状态数据</span></span><br><span class="line">  <span class="attr">reducers</span>: &#123;&#125;, <span class="comment">// 管理同步方法，必须是纯函数</span></span><br><span class="line">  <span class="attr">effects</span>: &#123;&#125;, <span class="comment">// 管理异步操作，采用了 generator 的相关概念</span></span><br><span class="line">  <span class="attr">subscriptions</span>: &#123;&#125;, <span class="comment">// 订阅数据源</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h5 id="umi-model注册"><a href="#umi-model注册" class="headerlink" title="umi model注册"></a>umi model注册</h5><blockquote><p>umi中，按照约定的目录 <strong>src/models</strong> 文件夹中被注册为model</p></blockquote><p>model 分两类，一是全局 model，二是页面 model。全局 model 存于 <code>/src/models/</code> 目录，所有页面都可引用；页面 model 不能被其他页面所引用。</p><ul><li><code>src/models/**/*.js</code> 为 global model</li><li><code>src/pages/**/models/**/*.js</code> 为 page model</li><li>global model 全量载入，page model 在 production 时按需载入，在 development 时全量载入</li><li>page model 为 page js 所在路径下 <code>models/**/*.js</code> 的文件</li><li>page model 会向上查找，比如 page js 为 <code>pages/a/b.js</code>，他的 page model 为 <code>pages/a/b/models/**/*.js</code> + <code>pages/a/models/**/*.js</code>，依次类推</li><li>约定 model.js 为单文件 model，解决只有一个 model 时不需要建 models 目录的问题，有 model.js 则不去找 <code>models/**/*.js</code></li></ul><h2 id="React框架分类"><a href="#React框架分类" class="headerlink" title="React框架分类"></a>React框架分类</h2><ul><li>Flux<ul><li>利用一个单向的数据流补充了React的组合视图组件，更像一种模式而非框架</li></ul></li><li>Redux<ul><li>JS状态容器，提供可预测的状态管理，Redux使<strong>组件状态共享</strong>变得简单</li></ul></li><li>Ant Design of React<ul><li>阿里开源的基于React的企业级后台产品，继承了多种React框架</li><li>Ant Design提供了丰富的组件，包括：按钮、表单、表格、布局、分页、树组件、日历等</li></ul></li></ul><h2 id="AntDesign"><a href="#AntDesign" class="headerlink" title="AntDesign"></a>AntDesign</h2><h3 id="简介-1"><a href="#简介-1" class="headerlink" title="简介"></a>简介</h3><p>Ant Design是阿里蚂蚁金服 <strong>基于React开发的UI组件</strong> ，主要用于中后台系统的使用</p><p><a target="_blank" rel="noopener" href="https://ant.design/components/overview-cn/">官网</a></p><p><strong>特性</strong></p><ul><li>🌈 提炼自企业级中后台产品的交互语言和视觉风格。</li><li>📦 开箱即用的高质量 React 组件。</li><li>🛡 使用 TypeScript 开发，提供完整的类型定义文件。</li><li>⚙️ 全链路开发和设计工具体系。</li><li>🌍 数十个国际化语言支持。</li><li>🎨 深入每个细节的主题定制能力。</li></ul><h3 id="配置开启antd"><a href="#配置开启antd" class="headerlink" title="配置开启antd"></a>配置开启antd</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="attr">dva</span>: &#123;</span><br><span class="line">        <span class="attr">immer</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">hmr</span>: <span class="literal">false</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">antd</span>: &#123;</span><br><span class="line">		</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="Tabs"><a href="#Tabs" class="headerlink" title="Tabs"></a>Tabs</h3><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Tabs</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;antd&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> &#123; <span class="title class_">TabPane</span> &#125; = <span class="title class_">Tabs</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">callback</span>(<span class="params">key</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(key);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">TabsTest</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span>&#123;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            <span class="language-xml"><span class="tag">&lt;<span class="name">Tabs</span> <span class="attr">defaultActiveKey</span>=<span class="string">&quot;1&quot;</span> <span class="attr">onChange</span>=<span class="string">&#123;callback&#125;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">TabPane</span> <span class="attr">tab</span>=<span class="string">&quot;Tab 1&quot;</span> <span class="attr">key</span>=<span class="string">&quot;1&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                    Content of Tab Pane 1</span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">TabPane</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">TabPane</span> <span class="attr">tab</span>=<span class="string">&quot;Tab 2&quot;</span> <span class="attr">key</span>=<span class="string">&quot;2&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                    Content of Tab Pane 2</span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">TabPane</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">TabPane</span> <span class="attr">tab</span>=<span class="string">&quot;Tab 3&quot;</span> <span class="attr">key</span>=<span class="string">&quot;3&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                    Content of Tab Pane 3</span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">TabPane</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">Tabs</span>&gt;</span></span></span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">TabsTest</span>;</span><br></pre></td></tr></table></figure><h3 id="布局"><a href="#布局" class="headerlink" title="布局"></a>布局</h3><ul><li>Layout: 布局容器，其下可嵌套 <code>Header</code> <code>Sider</code> <code>Content</code> <code>Footer</code> 或 <code>Layout</code> 本身，可以放在任何父容器中。</li><li>Header: 顶部布局，自带默认样式，其下可嵌套任何元素，只能放在 <code>Layout</code> 中</li><li>Sider : 侧边栏，自带默认样式及基本功能，其下可嵌套任何元素，只能放在 <code>Layout</code> 中</li><li>Content: 内容部分，自带默认样式，其下可嵌套任何元素，只能放在 <code>Layout</code>中</li><li>Footer ： 底部布局，自带默认样式，其下可嵌套任何元素，只能放在 <code>Layout</code> 中</li></ul><h4 id="搭建整体框架-子页面使用布局"><a href="#搭建整体框架-子页面使用布局" class="headerlink" title="搭建整体框架+子页面使用布局"></a>搭建整体框架+子页面使用布局</h4><p>在 <strong>src目录</strong> 下创建layouts目录，并且在 <strong>layouts目录</strong> 下创建 <strong>index.js</strong> 文件</p><p><img src="/posts/1473435732/image-20210308103631202.png" alt="image-20210308103631202"></p><p>默认的全局路径由 <strong>/umi/core/routes.ts </strong>配置</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Layout</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;antd&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> &#123; <span class="title class_">Header</span>, <span class="title class_">Footer</span>, <span class="title class_">Sider</span>, <span class="title class_">Content</span> &#125; = <span class="title class_">Layout</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">BasicLayout</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span>&#123;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            <span class="language-xml"><span class="tag">&lt;<span class="name">Layout</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">Sider</span>&gt;</span>Sider<span class="tag">&lt;/<span class="name">Sider</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">Layout</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">Header</span>&gt;</span>Header<span class="tag">&lt;/<span class="name">Header</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">Content</span>&gt;</span>&#123;this.props.children&#125;<span class="tag">&lt;/<span class="name">Content</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">Footer</span>&gt;</span>Footer<span class="tag">&lt;/<span class="name">Footer</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">Layout</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">Layout</span>&gt;</span></span></span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">BasicLayout</span>;</span><br></pre></td></tr></table></figure><p><img src="/posts/1473435732/image-20210308104219813.png" alt="image-20210308104219813"></p><h4 id="自定义配置布局路由"><a href="#自定义配置布局路由" class="headerlink" title="自定义配置布局路由"></a>自定义配置布局路由</h4><blockquote><p>若进行路由配置，表明通过 <strong>手动配置</strong> 的方式进行访问页面，不采用umi默认的路由方式</p><ul><li><code>routes</code> 以 <strong>src/pages</strong> 为根目录</li><li>采用手动配置则所有的页面路由均需要手动配置</li></ul></blockquote><p><strong>config.js</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="attr">dva</span>: &#123;</span><br><span class="line">        <span class="attr">immer</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">hmr</span>: <span class="literal">false</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">antd</span>: &#123;</span><br><span class="line"></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">routes</span>: [&#123;</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">        <span class="attr">component</span>: <span class="string">&#x27;../../BasicLayout.js&#x27;</span>, <span class="comment">//配置布局路由</span></span><br><span class="line">        <span class="attr">routes</span>:[</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">path</span>: <span class="string">&#x27;/test&#x27;</span>,</span><br><span class="line">                <span class="attr">component</span>:<span class="string">&#x27;./test&#x27;</span></span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">path</span>: <span class="string">&#x27;./tabstest&#x27;</span>,</span><br><span class="line">                <span class="attr">component</span>:<span class="string">&#x27;./tabstest&#x27;</span></span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;]</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><img src="/posts/1473435732/image-20210308104852543.png" alt="image-20210308104852543"></p><p><img src="/posts/1473435732/image-20210308105554638.png" alt="image-20210308105554638"></p><h4 id="页面美化"><a href="#页面美化" class="headerlink" title="页面美化"></a>页面美化</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Layout</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;antd&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> &#123; <span class="title class_">Header</span>, <span class="title class_">Footer</span>, <span class="title class_">Sider</span>, <span class="title class_">Content</span> &#125; = <span class="title class_">Layout</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">BasicLayout</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span>&#123;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            <span class="language-xml"><span class="tag">&lt;<span class="name">Layout</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">Sider</span> <span class="attr">width</span>=<span class="string">&#123;256&#125;</span> <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">minHeight:</span> &#x27;<span class="attr">100vh</span>&#x27;, <span class="attr">color:</span> &#x27;<span class="attr">white</span>&#x27; &#125;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">                    Sider</span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">Sider</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">Layout</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">Header</span> <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">background:</span> &#x27;#<span class="attr">fff</span>&#x27;, <span class="attr">textAlign:</span> &#x27;<span class="attr">center</span>&#x27;, <span class="attr">padding:</span> <span class="attr">0</span> &#125;&#125;&gt;</span>Header<span class="tag">&lt;/<span class="name">Header</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">Content</span> <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">margin:</span> &#x27;<span class="attr">24px</span> <span class="attr">16px</span> <span class="attr">0</span>&#x27; &#125;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">padding:</span> <span class="attr">24</span>, <span class="attr">background:</span> &#x27;#<span class="attr">fff</span>&#x27;, <span class="attr">minHeight:</span> <span class="attr">360</span> &#125;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">                            &#123;this.props.children&#125;</span></span><br><span class="line"><span class="language-xml">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;/<span class="name">Content</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">Footer</span> <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">textAlign:</span> &#x27;<span class="attr">center</span>&#x27; &#125;&#125;&gt;</span>后台系统 ©2018 Created by 黑马程序员<span class="tag">&lt;/<span class="name">Footer</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">Layout</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">Layout</span>&gt;</span></span></span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">BasicLayout</span>;</span><br></pre></td></tr></table></figure><h3 id="导航菜单"><a href="#导航菜单" class="headerlink" title="导航菜单"></a>导航菜单</h3><h4 id="安装图标组件包"><a href="#安装图标组件包" class="headerlink" title="安装图标组件包"></a>安装图标组件包</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save @ant-design/icons</span><br></pre></td></tr></table></figure><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Layout</span>, <span class="title class_">Menu</span>&#125; <span class="keyword">from</span> <span class="string">&#x27;antd&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;<span class="title class_">PieChartOutlined</span>, <span class="title class_">DesktopOutlined</span>, <span class="title class_">InboxOutlined</span>, <span class="title class_">AppstoreOutlined</span>, <span class="title class_">MailOutlined</span>&#125; <span class="keyword">from</span> <span class="string">&#x27;@ant-design/icons&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> &#123; <span class="title class_">Header</span>, <span class="title class_">Footer</span>, <span class="title class_">Sider</span>, <span class="title class_">Content</span> &#125; = <span class="title class_">Layout</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">SubMenu</span> = <span class="title class_">Menu</span>.<span class="property">SubMenu</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">BasicLayout</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span>&#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">props</span>)&#123;</span><br><span class="line">        <span class="variable language_">super</span>(props);</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">state</span> = &#123;</span><br><span class="line">            <span class="attr">collapsed</span>: <span class="literal">false</span>,</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            <span class="language-xml"><span class="tag">&lt;<span class="name">Layout</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">Sider</span> <span class="attr">width</span>=<span class="string">&#123;256&#125;</span> <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">minHeight:</span> &#x27;<span class="attr">100vh</span>&#x27;, <span class="attr">color:</span> &#x27;<span class="attr">white</span>&#x27; &#125;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">height:</span> &#x27;<span class="attr">32px</span>&#x27;, <span class="attr">background:</span> &#x27;<span class="attr">rgba</span>(<span class="attr">255</span>,<span class="attr">255</span>,<span class="attr">255</span>,<span class="attr">.2</span>)&#x27;, <span class="attr">margin:</span> &#x27;<span class="attr">16px</span>&#x27;&#125;&#125;/&gt;</span></span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">Menu</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                        <span class="attr">defaultSelectedKeys</span>=<span class="string">&#123;[</span>&#x27;<span class="attr">2</span>&#x27;]&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                        <span class="attr">defaultOpenKeys</span>=<span class="string">&#123;[</span>&#x27;<span class="attr">sub1</span>&#x27;]&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                        <span class="attr">mode</span>=<span class="string">&quot;inline&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                        <span class="attr">theme</span>=<span class="string">&quot;dark&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                        <span class="attr">inlineCollapsed</span>=<span class="string">&#123;this.state.collapsed&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    &gt;</span></span></span><br><span class="line"><span class="language-xml">                        <span class="tag">&lt;<span class="name">Menu.Item</span> <span class="attr">key</span>=<span class="string">&quot;1&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                            <span class="tag">&lt;<span class="name">PieChartOutlined</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">                            <span class="tag">&lt;<span class="name">span</span>&gt;</span>Option 1<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                        <span class="tag">&lt;/<span class="name">Menu.Item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                        <span class="tag">&lt;<span class="name">Menu.Item</span> <span class="attr">key</span>=<span class="string">&quot;2&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                            <span class="tag">&lt;<span class="name">DesktopOutlined</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">                            <span class="tag">&lt;<span class="name">span</span>&gt;</span>Option 2<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                        <span class="tag">&lt;/<span class="name">Menu.Item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                        <span class="tag">&lt;<span class="name">Menu.Item</span> <span class="attr">key</span>=<span class="string">&quot;3&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                            <span class="tag">&lt;<span class="name">InboxOutlined</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">                            <span class="tag">&lt;<span class="name">span</span>&gt;</span>Option 3<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                            传智播客</span></span><br><span class="line"><span class="language-xml">                        <span class="tag">&lt;/<span class="name">Menu.Item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                        <span class="tag">&lt;<span class="name">SubMenu</span> <span class="attr">key</span>=<span class="string">&quot;sub1&quot;</span> <span class="attr">title</span>=<span class="string">&#123;</span>&lt;<span class="attr">span</span>&gt;</span><span class="tag">&lt;<span class="name">MailOutlined</span> /&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>Navigation One<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span>&#125;&gt;</span></span><br><span class="line"><span class="language-xml">                            <span class="tag">&lt;<span class="name">Menu.Item</span> <span class="attr">key</span>=<span class="string">&quot;5&quot;</span>&gt;</span>Option 5<span class="tag">&lt;/<span class="name">Menu.Item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                            <span class="tag">&lt;<span class="name">Menu.Item</span> <span class="attr">key</span>=<span class="string">&quot;6&quot;</span>&gt;</span>Option 6<span class="tag">&lt;/<span class="name">Menu.Item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                            <span class="tag">&lt;<span class="name">Menu.Item</span> <span class="attr">key</span>=<span class="string">&quot;7&quot;</span>&gt;</span>Option 7<span class="tag">&lt;/<span class="name">Menu.Item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                            <span class="tag">&lt;<span class="name">Menu.Item</span> <span class="attr">key</span>=<span class="string">&quot;8&quot;</span>&gt;</span>Option 8<span class="tag">&lt;/<span class="name">Menu.Item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                        <span class="tag">&lt;/<span class="name">SubMenu</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                        <span class="tag">&lt;<span class="name">SubMenu</span> <span class="attr">key</span>=<span class="string">&quot;sub2&quot;</span> <span class="attr">title</span>=<span class="string">&#123;</span>&lt;<span class="attr">span</span>&gt;</span><span class="tag">&lt;<span class="name">AppstoreOutlined</span> /&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>Navigation Two<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span>&#125;&gt;</span></span><br><span class="line"><span class="language-xml">                            <span class="tag">&lt;<span class="name">Menu.Item</span> <span class="attr">key</span>=<span class="string">&quot;9&quot;</span>&gt;</span>Option 9<span class="tag">&lt;/<span class="name">Menu.Item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                            <span class="tag">&lt;<span class="name">Menu.Item</span> <span class="attr">key</span>=<span class="string">&quot;10&quot;</span>&gt;</span>Option 10<span class="tag">&lt;/<span class="name">Menu.Item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                            <span class="tag">&lt;<span class="name">SubMenu</span> <span class="attr">key</span>=<span class="string">&quot;sub3&quot;</span> <span class="attr">title</span>=<span class="string">&quot;Submenu&quot;</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                                <span class="tag">&lt;<span class="name">Menu.Item</span> <span class="attr">key</span>=<span class="string">&quot;11&quot;</span>&gt;</span>Option 11<span class="tag">&lt;/<span class="name">Menu.Item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                                <span class="tag">&lt;<span class="name">Menu.Item</span> <span class="attr">key</span>=<span class="string">&quot;12&quot;</span>&gt;</span>Option 12<span class="tag">&lt;/<span class="name">Menu.Item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                            <span class="tag">&lt;/<span class="name">SubMenu</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                        <span class="tag">&lt;/<span class="name">SubMenu</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;/<span class="name">Menu</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">Sider</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">Layout</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">Header</span> <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">background:</span> &#x27;#<span class="attr">fff</span>&#x27;, <span class="attr">textAlign:</span> &#x27;<span class="attr">center</span>&#x27;, <span class="attr">padding:</span> <span class="attr">0</span> &#125;&#125;&gt;</span>Header<span class="tag">&lt;/<span class="name">Header</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">Content</span> <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">margin:</span> &#x27;<span class="attr">24px</span> <span class="attr">16px</span> <span class="attr">0</span>&#x27; &#125;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">padding:</span> <span class="attr">24</span>, <span class="attr">background:</span> &#x27;#<span class="attr">fff</span>&#x27;, <span class="attr">minHeight:</span> <span class="attr">360</span> &#125;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">                            &#123;this.props.children&#125;</span></span><br><span class="line"><span class="language-xml">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;/<span class="name">Content</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">Footer</span> <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">textAlign:</span> &#x27;<span class="attr">center</span>&#x27; &#125;&#125;&gt;</span>后台系统 ©2018 Created by 黑马程序员<span class="tag">&lt;/<span class="name">Footer</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">Layout</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">Layout</span>&gt;</span></span></span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">BasicLayout</span>;</span><br></pre></td></tr></table></figure><h4 id="导航添加链接"><a href="#导航添加链接" class="headerlink" title="导航添加链接"></a>导航添加链接</h4><p>在 <strong>src/pages/user</strong> 下创建 <strong>UserAdd.js</strong> 和 <strong>UserList.js</strong> 文件，用于模拟实现新增用户和查询用户列表功能</p><p><img src="/posts/1473435732/image-20210308143825663.png" alt="image-20210308143825663"></p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//UserAdd.js</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UserAdd</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span>&#123;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>新增用户<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">UserAdd</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span>;</span><br><span class="line"></span><br><span class="line">* ./utils <span class="keyword">in</span> ./node_modules/jest-config/build/ts3<span class="number">.4</span>/index.<span class="property">d</span>.<span class="property">ts</span></span><br><span class="line"><span class="title class_">UserList</span>.<span class="property">js</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UserList</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span>&#123;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>用户列表<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">UserList</span>;</span><br></pre></td></tr></table></figure><p><strong>若是手动配置路由，则需要修改路由配置</strong></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="attr">dva</span>: &#123;</span><br><span class="line">        <span class="attr">immer</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">hmr</span>: <span class="literal">false</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">antd</span>: &#123;</span><br><span class="line"></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">routes</span>: [&#123;</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">        <span class="attr">component</span>: <span class="string">&#x27;../../BasicLayout.js&#x27;</span>, <span class="comment">//配置布局路由</span></span><br><span class="line">        <span class="attr">routes</span>:[</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">path</span>: <span class="string">&#x27;/test&#x27;</span>,</span><br><span class="line">                <span class="attr">component</span>:<span class="string">&#x27;./test&#x27;</span></span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">path</span>: <span class="string">&#x27;/tabstest&#x27;</span>,</span><br><span class="line">                <span class="attr">component</span>:<span class="string">&#x27;./tabstest&#x27;</span></span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">path</span>: <span class="string">&#x27;/user&#x27;</span>,</span><br><span class="line">                <span class="attr">routes</span>: [</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="attr">path</span>: <span class="string">&#x27;/user/add&#x27;</span>,</span><br><span class="line">                        <span class="attr">component</span>: <span class="string">&#x27;./user/UserAdd&#x27;</span></span><br><span class="line">                    &#125;,</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="attr">path</span>: <span class="string">&#x27;/user/list&#x27;</span>,</span><br><span class="line">                        <span class="attr">component</span>: <span class="string">&#x27;./user/UserList&#x27;</span></span><br><span class="line">                    &#125;</span><br><span class="line">                ]</span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;]</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p><strong>注意</strong></p><blockquote><p>使用了umi的link标签，目的是出现记录点击的菜单</p></blockquote><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123; <span class="title class_">Layout</span>, <span class="title class_">Menu</span>&#125; <span class="keyword">from</span> <span class="string">&#x27;antd&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;<span class="title class_">UserOutlined</span>&#125; <span class="keyword">from</span> <span class="string">&#x27;@ant-design/icons&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;<span class="title class_">Link</span>&#125; <span class="keyword">from</span> <span class="string">&#x27;umi&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> &#123; <span class="title class_">Header</span>, <span class="title class_">Footer</span>, <span class="title class_">Sider</span>, <span class="title class_">Content</span> &#125; = <span class="title class_">Layout</span>;</span><br><span class="line"><span class="keyword">const</span> <span class="title class_">SubMenu</span> = <span class="title class_">Menu</span>.<span class="property">SubMenu</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">BasicLayout</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span>&#123;</span><br><span class="line">    <span class="title function_">constructor</span>(<span class="params">props</span>)&#123;</span><br><span class="line">        <span class="variable language_">super</span>(props);</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">state</span> = &#123;</span><br><span class="line">            <span class="attr">collapsed</span>: <span class="literal">false</span>,</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>)&#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            <span class="language-xml"><span class="tag">&lt;<span class="name">Layout</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">Sider</span> <span class="attr">width</span>=<span class="string">&#123;256&#125;</span> <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">minHeight:</span> &#x27;<span class="attr">100vh</span>&#x27;, <span class="attr">color:</span> &#x27;<span class="attr">white</span>&#x27; &#125;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">height:</span> &#x27;<span class="attr">32px</span>&#x27;, <span class="attr">background:</span> &#x27;<span class="attr">rgba</span>(<span class="attr">255</span>,<span class="attr">255</span>,<span class="attr">255</span>,<span class="attr">.2</span>)&#x27;, <span class="attr">margin:</span> &#x27;<span class="attr">16px</span>&#x27;&#125;&#125;/&gt;</span></span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">Menu</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                        <span class="attr">defaultSelectedKeys</span>=<span class="string">&#123;[</span>&#x27;<span class="attr">2</span>&#x27;]&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                        <span class="attr">defaultOpenKeys</span>=<span class="string">&#123;[</span>&#x27;<span class="attr">sub1</span>&#x27;]&#125;</span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                        <span class="attr">mode</span>=<span class="string">&quot;inline&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                        <span class="attr">theme</span>=<span class="string">&quot;dark&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                        <span class="attr">inlineCollapsed</span>=<span class="string">&#123;this.state.collapsed&#125;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                    &gt;</span></span></span><br><span class="line"><span class="language-xml">                        <span class="tag">&lt;<span class="name">SubMenu</span> <span class="attr">key</span>=<span class="string">&quot;sub1&quot;</span> <span class="attr">title</span>=<span class="string">&#123;</span>&lt;<span class="attr">span</span>&gt;</span><span class="tag">&lt;<span class="name">UserOutlined</span> /&gt;</span><span class="tag">&lt;<span class="name">span</span>&gt;</span>用户管理<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span>&#125;&gt;</span></span><br><span class="line"><span class="language-xml">                            <span class="tag">&lt;<span class="name">Menu.Item</span> <span class="attr">key</span>=<span class="string">&quot;1&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">Link</span> <span class="attr">to</span>=<span class="string">&#123;</span>&quot;/<span class="attr">user</span>/<span class="attr">add</span>&quot;&#125;&gt;</span>新增用户<span class="tag">&lt;/<span class="name">Link</span>&gt;</span><span class="tag">&lt;/<span class="name">Menu.Item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                            <span class="tag">&lt;<span class="name">Menu.Item</span> <span class="attr">key</span>=<span class="string">&quot;2&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">Link</span> <span class="attr">to</span>=<span class="string">&#123;</span>&quot;/<span class="attr">user</span>/<span class="attr">list</span>&quot;&#125;&gt;</span>用户列表<span class="tag">&lt;/<span class="name">Link</span>&gt;</span><span class="tag">&lt;/<span class="name">Menu.Item</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                        <span class="tag">&lt;/<span class="name">SubMenu</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;/<span class="name">Menu</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">Sider</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">Layout</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">Header</span> <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">background:</span> &#x27;#<span class="attr">fff</span>&#x27;, <span class="attr">textAlign:</span> &#x27;<span class="attr">center</span>&#x27;, <span class="attr">padding:</span> <span class="attr">0</span> &#125;&#125;&gt;</span>Header<span class="tag">&lt;/<span class="name">Header</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">Content</span> <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">margin:</span> &#x27;<span class="attr">24px</span> <span class="attr">16px</span> <span class="attr">0</span>&#x27; &#125;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">                        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">padding:</span> <span class="attr">24</span>, <span class="attr">background:</span> &#x27;#<span class="attr">fff</span>&#x27;, <span class="attr">minHeight:</span> <span class="attr">360</span> &#125;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">                            &#123;this.props.children&#125;</span></span><br><span class="line"><span class="language-xml">                        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;/<span class="name">Content</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">Footer</span> <span class="attr">style</span>=<span class="string">&#123;&#123;</span> <span class="attr">textAlign:</span> &#x27;<span class="attr">center</span>&#x27; &#125;&#125;&gt;</span>后台系统 ©2018 Created by 黑马程序员<span class="tag">&lt;/<span class="name">Footer</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">Layout</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">Layout</span>&gt;</span></span></span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">BasicLayout</span>;</span><br></pre></td></tr></table></figure><p><img src="/posts/1473435732/image-20210308184316416.png" alt="image-20210308184316416"></p><h3 id="表格"><a href="#表格" class="headerlink" title="表格"></a>表格</h3><p><a target="_blank" rel="noopener" href="https://ant.design/components/table-cn/">表格文档</a></p><h4 id="基本用法"><a href="#基本用法" class="headerlink" title="基本用法"></a>基本用法</h4><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123;<span class="title class_">Table</span>, <span class="title class_">Divider</span>, <span class="title class_">Tag</span>, <span class="title class_">Pagination</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;antd&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> &#123;<span class="title class_">Column</span>&#125; = <span class="title class_">Table</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> data = [</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">key</span>: <span class="string">&#x27;1&#x27;</span>,</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;张三&#x27;</span>,</span><br><span class="line">        <span class="attr">age</span>: <span class="number">32</span>,</span><br><span class="line">        <span class="attr">address</span>: <span class="string">&#x27;上海市&#x27;</span>,</span><br><span class="line">        <span class="attr">tags</span>: [<span class="string">&#x27;程序员&#x27;</span>, <span class="string">&#x27;帅气&#x27;</span>],</span><br><span class="line">    &#125;, &#123;</span><br><span class="line">        <span class="attr">key</span>: <span class="string">&#x27;2&#x27;</span>,</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;李四&#x27;</span>,</span><br><span class="line">        <span class="attr">age</span>: <span class="number">42</span>,</span><br><span class="line">        <span class="attr">address</span>: <span class="string">&#x27;北京市&#x27;</span>,</span><br><span class="line">        <span class="attr">tags</span>: [<span class="string">&#x27;屌丝&#x27;</span>],</span><br><span class="line">    &#125;, &#123;</span><br><span class="line">        <span class="attr">key</span>: <span class="string">&#x27;3&#x27;</span>,</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;王五&#x27;</span>,</span><br><span class="line">        <span class="attr">age</span>: <span class="number">32</span>,</span><br><span class="line">        <span class="attr">address</span>: <span class="string">&#x27;杭州市&#x27;</span>,</span><br><span class="line">        <span class="attr">tags</span>: [<span class="string">&#x27;高富帅&#x27;</span>, <span class="string">&#x27;富二代&#x27;</span>],</span><br><span class="line">    &#125;];</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UserList</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">Table</span> <span class="attr">dataSource</span>=<span class="string">&#123;data&#125;</span> <span class="attr">pagination</span>= <span class="string">&#123;&#123;position:</span>&quot;<span class="attr">bottom</span>&quot;,<span class="attr">total:500</span>,<span class="attr">pageSize:10</span>, <span class="attr">defaultCurrent:3</span>&#125;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">Column</span> <span class="attr">title</span>=<span class="string">&quot;姓名&quot;</span> <span class="attr">dataIndex</span>=<span class="string">&quot;name&quot;</span> <span class="attr">key</span>=<span class="string">&quot;name&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">Column</span> <span class="attr">title</span>=<span class="string">&quot;年龄&quot;</span> <span class="attr">dataIndex</span>=<span class="string">&quot;age&quot;</span> <span class="attr">key</span>=<span class="string">&quot;age&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">Column</span> <span class="attr">title</span>=<span class="string">&quot;地址&quot;</span> <span class="attr">dataIndex</span>=<span class="string">&quot;address&quot;</span> <span class="attr">key</span>=<span class="string">&quot;address&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">Column</span> <span class="attr">title</span>=<span class="string">&quot;标签&quot;</span> <span class="attr">dataIndex</span>=<span class="string">&quot;tags&quot;</span> <span class="attr">key</span>=<span class="string">&quot;tags&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                        <span class="attr">render</span>=<span class="string">&#123;tags</span> =&gt;</span> (</span></span><br><span class="line"><span class="language-xml">                            <span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;tags.map(tag =&gt; <span class="tag">&lt;<span class="name">Tag</span> <span class="attr">color</span>=<span class="string">&quot;blue&quot;</span> <span class="attr">key</span>= <span class="string">&#123;tag&#125;</span>&gt;</span>&#123;tag&#125;<span class="tag">&lt;/<span class="name">Tag</span>&gt;</span>)&#125; <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                        )&#125;</span></span><br><span class="line"><span class="language-xml">                    /&gt;</span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">Column</span>  <span class="attr">title</span>=<span class="string">&quot;操作&quot;</span> <span class="attr">key</span>=<span class="string">&quot;action&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                        <span class="attr">render</span>=<span class="string">&#123;(text,</span> <span class="attr">record</span>) =&gt;</span> (</span></span><br><span class="line"><span class="language-xml">                            <span class="tag">&lt;<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:;&quot;</span>&gt;</span>编辑<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                                <span class="tag">&lt;<span class="name">Divider</span> <span class="attr">type</span>=<span class="string">&quot;vertical&quot;</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml">                                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:;&quot;</span>&gt;</span>删除<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                            <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                        )&#125;</span></span><br><span class="line"><span class="language-xml">                    /&gt;</span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">Table</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">UserList</span>;</span><br></pre></td></tr></table></figure><p><img src="/posts/1473435732/image-20210308184840826.png" alt="image-20210308184840826"></p><h4 id="数据分离到model"><a href="#数据分离到model" class="headerlink" title="数据分离到model"></a>数据分离到model</h4><h5 id="1-新建model层"><a href="#1-新建model层" class="headerlink" title="1. 新建model层"></a>1. 新建model层</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&quot;../utils/request&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="attr">namespace</span>: <span class="string">&#x27;userList&#x27;</span>,</span><br><span class="line">    <span class="attr">state</span>: &#123;</span><br><span class="line">        <span class="attr">list</span>: []</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">reducers</span>: &#123;</span><br><span class="line">        <span class="title function_">queryList</span>(<span class="params">state, result</span>) &#123;</span><br><span class="line">            <span class="keyword">let</span> data = [...result.<span class="property">data</span>];</span><br><span class="line">            <span class="keyword">return</span> &#123; <span class="comment">//更新状态值</span></span><br><span class="line">                <span class="attr">list</span>: data</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">effects</span>: &#123;</span><br><span class="line">        *<span class="title function_">initData</span>(<span class="params">params, sagaEffects</span>) &#123;</span><br><span class="line">            <span class="keyword">const</span> &#123;call, put&#125; = sagaEffects;</span><br><span class="line">            <span class="keyword">const</span> url = <span class="string">&quot;/ds/user/list&quot;</span>;</span><br><span class="line">            <span class="keyword">let</span> data = <span class="keyword">yield</span> <span class="title function_">call</span>(request, url);</span><br><span class="line">            <span class="keyword">yield</span> <span class="title function_">put</span>(&#123;</span><br><span class="line">                type : <span class="string">&quot;queryList&quot;</span>,</span><br><span class="line">                data : data</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="2-mock数据"><a href="#2-mock数据" class="headerlink" title="2. mock数据"></a>2. mock数据</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="string">&#x27;GET /ds/user/list&#x27;</span>: <span class="keyword">function</span> (<span class="params">req, res</span>) &#123;</span><br><span class="line">        res.<span class="title function_">json</span>([&#123;</span><br><span class="line">            <span class="attr">key</span>: <span class="string">&#x27;1&#x27;</span>,</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&#x27;张三1&#x27;</span>,</span><br><span class="line">            <span class="attr">age</span>: <span class="number">32</span>,</span><br><span class="line">            <span class="attr">address</span>: <span class="string">&#x27;上海市&#x27;</span>,</span><br><span class="line">            <span class="attr">tags</span>: [<span class="string">&#x27;程序员&#x27;</span>, <span class="string">&#x27;帅气&#x27;</span>],</span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">key</span>: <span class="string">&#x27;2&#x27;</span>,</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&#x27;李四&#x27;</span>,</span><br><span class="line">            <span class="attr">age</span>: <span class="number">42</span>,</span><br><span class="line">            <span class="attr">address</span>: <span class="string">&#x27;北京市&#x27;</span>,</span><br><span class="line">            <span class="attr">tags</span>: [<span class="string">&#x27;屌丝&#x27;</span>],</span><br><span class="line">        &#125;, &#123;</span><br><span class="line">            <span class="attr">key</span>: <span class="string">&#x27;3&#x27;</span>,</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&#x27;王五&#x27;</span>,</span><br><span class="line">            <span class="attr">age</span>: <span class="number">32</span>,</span><br><span class="line">            <span class="attr">address</span>: <span class="string">&#x27;杭州市&#x27;</span>,</span><br><span class="line">            <span class="attr">tags</span>: [<span class="string">&#x27;高富帅&#x27;</span>, <span class="string">&#x27;富二代&#x27;</span>],</span><br><span class="line">        &#125;]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="3-修改UserList-jsx逻辑"><a href="#3-修改UserList-jsx逻辑" class="headerlink" title="3. 修改UserList.jsx逻辑"></a>3. 修改UserList.jsx逻辑</h5><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> request <span class="keyword">from</span> <span class="string">&quot;../utils/request&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="attr">namespace</span>: <span class="string">&#x27;userList&#x27;</span>,</span><br><span class="line">    <span class="attr">state</span>: &#123;</span><br><span class="line">        <span class="attr">list</span>: []</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">reducers</span>: &#123;</span><br><span class="line">        <span class="title function_">queryList</span>(<span class="params">state, result</span>) &#123;</span><br><span class="line">            <span class="keyword">let</span> data = [...result.<span class="property">data</span>];</span><br><span class="line">            <span class="keyword">return</span> &#123; <span class="comment">//更新状态值</span></span><br><span class="line">                <span class="attr">list</span>: data</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">effects</span>: &#123;</span><br><span class="line">        *<span class="title function_">initData</span>(<span class="params">params, sagaEffects</span>) &#123;</span><br><span class="line">            <span class="keyword">const</span> &#123;call, put&#125; = sagaEffects;</span><br><span class="line">            <span class="keyword">const</span> url = <span class="string">&quot;/ds/user/list&quot;</span>;</span><br><span class="line">            <span class="keyword">let</span> data = <span class="keyword">yield</span> <span class="title function_">call</span>(request, url);</span><br><span class="line">            <span class="keyword">yield</span> <span class="title function_">put</span>(&#123;</span><br><span class="line">                type : <span class="string">&quot;queryList&quot;</span>,</span><br><span class="line">                data : data</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/posts/1473435732/image-20210308190126261.png" alt="image-20210308190126261"></p><h5 id="4-新增请求"><a href="#4-新增请求" class="headerlink" title="4. 新增请求"></a>4. 新增请求</h5><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> &#123;<span class="title class_">Table</span>, <span class="title class_">Divider</span>, <span class="title class_">Tag</span>, <span class="title class_">Pagination</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;antd&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;connect&#125; <span class="keyword">from</span> <span class="string">&#x27;dva&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> &#123;<span class="title class_">Column</span>&#125; = <span class="title class_">Table</span>;</span><br><span class="line"><span class="keyword">const</span> namespace = <span class="string">&#x27;userList&#x27;</span></span><br><span class="line"></span><br><span class="line">@<span class="title function_">connect</span>(</span><br><span class="line">    <span class="function">(<span class="params">state</span>)=&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            <span class="attr">data</span>: state[namespace].<span class="property">list</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    (<span class="function"><span class="params">dispatch</span>=&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">return</span>&#123;</span><br><span class="line">            <span class="attr">initData</span>: <span class="function">()=&gt;</span>&#123;</span><br><span class="line">                <span class="title function_">dispatch</span>(&#123;</span><br><span class="line">                    <span class="attr">type</span>: namespace+<span class="string">&#x27;/initData&#x27;</span></span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">)</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">UserList</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">componentDidMount</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">props</span>.<span class="title function_">initData</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;<span class="name">Table</span> <span class="attr">dataSource</span>=<span class="string">&#123;this.props.data&#125;</span> <span class="attr">pagination</span>= <span class="string">&#123;&#123;position:</span>&quot;<span class="attr">bottom</span>&quot;,<span class="attr">total:500</span>,<span class="attr">pageSize:10</span>, <span class="attr">defaultCurrent:3</span>&#125;&#125;&gt;</span></span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">Column</span> <span class="attr">title</span>=<span class="string">&quot;姓名&quot;</span> <span class="attr">dataIndex</span>=<span class="string">&quot;name&quot;</span> <span class="attr">key</span>=<span class="string">&quot;name&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">Column</span> <span class="attr">title</span>=<span class="string">&quot;年龄&quot;</span> <span class="attr">dataIndex</span>=<span class="string">&quot;age&quot;</span> <span class="attr">key</span>=<span class="string">&quot;age&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">Column</span> <span class="attr">title</span>=<span class="string">&quot;地址&quot;</span> <span class="attr">dataIndex</span>=<span class="string">&quot;address&quot;</span> <span class="attr">key</span>=<span class="string">&quot;address&quot;</span> /&gt;</span></span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">Column</span> <span class="attr">title</span>=<span class="string">&quot;标签&quot;</span> <span class="attr">dataIndex</span>=<span class="string">&quot;tags&quot;</span> <span class="attr">key</span>=<span class="string">&quot;tags&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                        <span class="attr">render</span>=<span class="string">&#123;tags</span> =&gt;</span> (</span></span><br><span class="line"><span class="language-xml">                            <span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;tags.map(tag =&gt; <span class="tag">&lt;<span class="name">Tag</span> <span class="attr">color</span>=<span class="string">&quot;blue&quot;</span> <span class="attr">key</span>= <span class="string">&#123;tag&#125;</span>&gt;</span>&#123;tag&#125;<span class="tag">&lt;/<span class="name">Tag</span>&gt;</span>)&#125; <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                        )&#125;</span></span><br><span class="line"><span class="language-xml">                    /&gt;</span></span><br><span class="line"><span class="language-xml">                    <span class="tag">&lt;<span class="name">Column</span>  <span class="attr">title</span>=<span class="string">&quot;操作&quot;</span> <span class="attr">key</span>=<span class="string">&quot;action&quot;</span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml">                        <span class="attr">render</span>=<span class="string">&#123;(text,</span> <span class="attr">record</span>) =&gt;</span> (</span></span><br><span class="line"><span class="language-xml">                            <span class="tag">&lt;<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:;&quot;</span>&gt;</span>编辑<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                                <span class="tag">&lt;<span class="name">Divider</span> <span class="attr">type</span>=<span class="string">&quot;vertical&quot;</span>/&gt;</span></span></span><br><span class="line"><span class="language-xml">                                <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:;&quot;</span>&gt;</span>删除<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                            <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">                        )&#125;</span></span><br><span class="line"><span class="language-xml">                    /&gt;</span></span><br><span class="line"><span class="language-xml">                <span class="tag">&lt;/<span class="name">Table</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">UserList</span>;</span><br></pre></td></tr></table></figure><p><img src="/posts/1473435732/image-20210308190715625.png" alt="image-20210308190715625"></p><h2 id="Ant-Design-Pro"><a href="#Ant-Design-Pro" class="headerlink" title="Ant Design Pro"></a>Ant Design Pro</h2><h3 id="简介-2"><a href="#简介-2" class="headerlink" title="简介"></a>简介</h3><p><a target="_blank" rel="noopener" href="https://github.com/ant-design/ant-design-pro">源码地址</a></p><p>Ant Design Pro 是基于 Ant Design 和 umi 的封装的一整套企业级中后台<strong>前端设计</strong> 解决方案，致力于在设计规范和基础组件的基础上，继续向上构建，提炼出典型模板/业务组件/配套设计资源，进一步提升企业级中后台产品设计研发过程中的『用户』和『设计者』的体验。</p><h3 id="部署和安装"><a href="#部署和安装" class="headerlink" title="部署和安装"></a>部署和安装</h3><h4 id="1-下载源码-amp-解压"><a href="#1-下载源码-amp-解压" class="headerlink" title="1. 下载源码&amp;解压"></a>1. 下载源码&amp;解压</h4><p><img src="/posts/1473435732/image-20210308194346037.png" alt="image-20210308194346037"></p><p><strong>AntDesign Pro目录</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">├── config 			#umi 配置，包含路由，构建等配置</span><br><span class="line">├── mock 			#本地模拟数据</span><br><span class="line">├── public</span><br><span class="line">│ └── favicon.png 	# Favicon</span><br><span class="line">├── src</span><br><span class="line">│ ├── assets 		# 本地静态资源</span><br><span class="line">│ ├── components 	# 业务通用组件</span><br><span class="line">│ ├── e2e 			# 集成测试用例</span><br><span class="line">│ ├── layouts 		# 通用布局</span><br><span class="line">│ ├── models 		# 全局 dva model</span><br><span class="line">│ ├── pages 		# 业务页面入口和常用模板</span><br><span class="line">│ ├── services 		# 后台接口服务</span><br><span class="line">│ ├── utils 		# 工具库</span><br><span class="line">│ ├── locales 		# 国际化资源</span><br><span class="line">│ ├── global.less 	# 全局样式</span><br><span class="line">│ └── global.js 	# 全局 JS</span><br><span class="line">├── tests 			# 测试工具</span><br><span class="line">├── README.md</span><br><span class="line">└──package.json</span><br></pre></td></tr></table></figure><h4 id="2-导入"><a href="#2-导入" class="headerlink" title="2. 导入"></a>2. 导入</h4><h4 id="3-初始化及启动"><a href="#3-初始化及启动" class="headerlink" title="3. 初始化及启动"></a>3. 初始化及启动</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">tyarn install #安装相关依赖</span><br><span class="line">tyarn start #启动服务</span><br></pre></td></tr></table></figure><h3 id="菜单和路由"><a href="#菜单和路由" class="headerlink" title="菜单和路由"></a>菜单和路由</h3><p>在 pro 中，菜单和路由，在 <code>config/router.config.js</code> 中进行管理</p><p><img src="/posts/1473435732/image-20210308201912520.png" alt="image-20210308201912520"></p><p>可见， pro 提供两套路由，分别是 <code>/user</code> 和 <code>/app</code></p><p><img src="/posts/1473435732/image-20210308202410395.png" alt="image-20210308202410395"></p><p>由路由配置可见，登录成功后，会跳转到 <code>/dashboard</code></p><p><img src="/posts/1473435732/image-20210308202603552.png" alt="image-20210308202603552"></p><h4 id="菜单是由路由的配置生成的"><a href="#菜单是由路由的配置生成的" class="headerlink" title="菜单是由路由的配置生成的"></a>菜单是由路由的配置生成的</h4><blockquote><p>验证</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// new</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="attr">path</span>: <span class="string">&#x27;/new&#x27;</span>,</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;new&#x27;</span>,</span><br><span class="line">            <span class="attr">icon</span>: <span class="string">&#x27;user&#x27;</span>,</span><br><span class="line">                <span class="attr">routes</span>: [</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="attr">path</span>: <span class="string">&#x27;/new/analysis&#x27;</span>,</span><br><span class="line">                        <span class="attr">name</span>: <span class="string">&#x27;analysis&#x27;</span>,</span><br><span class="line">                        <span class="attr">component</span>: <span class="string">&#x27;./Dashboard/Analysis&#x27;</span>,</span><br><span class="line">                    &#125;,</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="attr">path</span>: <span class="string">&#x27;/new/monitor&#x27;</span>,</span><br><span class="line">                        <span class="attr">name</span>: <span class="string">&#x27;monitor&#x27;</span>,</span><br><span class="line">                        <span class="attr">component</span>: <span class="string">&#x27;./Dashboard/Monitor&#x27;</span>,</span><br><span class="line">                    &#125;,</span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="attr">path</span>: <span class="string">&#x27;/new/workplace&#x27;</span>,</span><br><span class="line">                        <span class="attr">name</span>: <span class="string">&#x27;workplace&#x27;</span>,</span><br><span class="line">                        <span class="attr">component</span>: <span class="string">&#x27;./Dashboard/Workplace&#x27;</span>,</span><br><span class="line">                    &#125;,</span><br><span class="line">                ],</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><p><img src="/posts/1473435732/image-20210308203308223.png" alt="image-20210308203308223"></p><h4 id="在国际化文件中配置文字"><a href="#在国际化文件中配置文字" class="headerlink" title="在国际化文件中配置文字"></a>在国际化文件中配置文字</h4><p><img src="/posts/1473435732/image-20210308203424894.png" alt="image-20210308203424894"></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;menu.new&#x27;</span>: <span class="string">&#x27;New Dashboard&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;menu.new.analysis&#x27;</span>: <span class="string">&#x27;New 分析页&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;menu.new.monitor&#x27;</span>: <span class="string">&#x27;New 监控页&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;menu.new.workplace&#x27;</span>: <span class="string">&#x27;New 工作台&#x27;</span>,</span><br></pre></td></tr></table></figure><p><img src="/posts/1473435732/image-20210308203637264.png" alt="image-20210308203637264"></p><h3 id="新增页面"><a href="#新增页面" class="headerlink" title="新增页面"></a>新增页面</h3><p>在 <code>src/pages</code> 中，以功能为单元创建目录</p><figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="title class_">React</span> <span class="keyword">from</span> <span class="string">&quot;react&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// eslint-disable-next-line react/prefer-stateless-function</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">NewAnalysis</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span>&#123;</span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">return</span>(</span><br><span class="line">      <span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span>New Analysis<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">    )</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">NewAnalysis</span>;</span><br></pre></td></tr></table></figure><p>修改路由配置</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// new</span></span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&#x27;/new&#x27;</span>,</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;new&#x27;</span>,</span><br><span class="line">        <span class="attr">icon</span>: <span class="string">&#x27;user&#x27;</span>,</span><br><span class="line">        <span class="attr">routes</span>: [</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">path</span>: <span class="string">&#x27;/new/analysis&#x27;</span>,</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&#x27;analysis&#x27;</span>,</span><br><span class="line">            <span class="attr">component</span>: <span class="string">&#x27;./New/NewAnalysis&#x27;</span>,</span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">path</span>: <span class="string">&#x27;/new/monitor&#x27;</span>,</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&#x27;monitor&#x27;</span>,</span><br><span class="line">            <span class="attr">component</span>: <span class="string">&#x27;./Dashboard/Monitor&#x27;</span>,</span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">path</span>: <span class="string">&#x27;/new/workplace&#x27;</span>,</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&#x27;workplace&#x27;</span>,</span><br><span class="line">            <span class="attr">component</span>: <span class="string">&#x27;./Dashboard/Workplace&#x27;</span>,</span><br><span class="line">          &#125;,</span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br></pre></td></tr></table></figure><p><img src="/posts/1473435732/image-20210308205111540.png" alt="image-20210308205111540" style="zoom:50%"></p><h3 id="Pro中model执行流程"><a href="#Pro中model执行流程" class="headerlink" title="Pro中model执行流程"></a>Pro中model执行流程</h3><p><img src="/posts/1473435732/image-20210308210249174.png" alt="image-20210308210249174"></p><h4 id="路由即菜单"><a href="#路由即菜单" class="headerlink" title="路由即菜单"></a>路由即菜单</h4><p><img src="/posts/1473435732/image-20210308210729464.png" alt="image-20210308210729464" style="zoom:67%"></p><p><img src="/posts/1473435732/image-20210308215053084.png" alt="image-20210308215053084"></p><ul><li>在TableList.js中，组件加载完成后进行加载数据</li><li>在 <code>StandardTable</code> 中，使用Table组件生成表格，其中数据源是 <code>data</code></li><li>TableList.js中，data数据从 <code>构造方法</code> 中获取到</li><li>this.props中的 <code>rule</code> 数据，是通过 <code>@connect</code> 修饰器获取</li><li>数据从 <code>models/rule.js</code> 中获取</li><li><code>queryRule</code> 是在 <code>/services/api</code> 中进行了定义</li><li>数据的mock是在 <code>mock/rule.js</code> 中完成</li></ul></div><div><div><div style="text-align:center;color:#ccc;font-size:14px">-------------<i class="fa fa-hand-peace-o"></i>本文结束-------------</div></div></div><div><ul class="post-copyright"><li class="post-copyright-author"><strong>本文作者 </strong>AmosTian</li><li class="post-copyright-link"><strong>本文链接 </strong><a href="https://amostian.github.io/posts/1473435732/" title="ReactJS">https://amostian.github.io/posts/1473435732/</a></li><li class="post-copyright-license"><strong>版权声明 </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fa fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！</li></ul></div><footer class="post-footer"><div class="post-tags"><a href="/tags/%E5%BC%80%E5%8F%91/" rel="tag"><i class="fa fa-tags"></i> 开发</a> <a href="/tags/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B/" rel="tag"><i class="fa fa-tags"></i> 前端工程</a> <a href="/tags/ReactJS/" rel="tag"><i class="fa fa-tags"></i> ReactJS</a></div><div class="post-nav"><div class="post-nav-item"><a href="/posts/2797554274/" rel="prev" title="JavaScript&ES6"><i class="fa fa-chevron-left"></i> JavaScript&ES6</a></div><div class="post-nav-item"><a href="/posts/919670835/" rel="next" title="微聊系统与消息队列">微聊系统与消息队列 <i class="fa fa-chevron-right"></i></a></div></div></footer></article></div><script>window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }</script></div><div class="toggle sidebar-toggle"><span class="toggle-line toggle-line-first"></span> <span class="toggle-line toggle-line-middle"></span> <span class="toggle-line toggle-line-last"></span></div><aside class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc">文章目录</li><li class="sidebar-nav-overview">站点概览</li></ul><div class="post-toc-wrap sidebar-panel"><div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#ReactJS"><span class="nav-text">ReactJS</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91%E7%9A%84%E5%9B%9B%E4%B8%AA%E9%98%B6%E6%AE%B5"><span class="nav-text">前端开发的四个阶段</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E9%9D%99%E6%80%81%E9%A1%B5%E9%9D%A2%E9%98%B6%E6%AE%B5"><span class="nav-text">1. 静态页面阶段</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-ajax%E9%98%B6%E6%AE%B5"><span class="nav-text">2. ajax阶段</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-%E5%89%8D%E7%AB%AFMV%E9%98%B6%E6%AE%B5"><span class="nav-text">3. 前端MV阶段</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-SPA%E9%98%B6%E6%AE%B5"><span class="nav-text">4. SPA阶段</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ReactJS-1"><span class="nav-text">ReactJS</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AE%80%E4%BB%8B"><span class="nav-text">简介</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#HelloWorld"><span class="nav-text">HelloWorld</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-%E6%96%B0%E5%BB%BAstatic-web%E9%A1%B9%E7%9B%AE"><span class="nav-text">1. 新建static web项目</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-%E5%88%9D%E5%A7%8B%E5%8C%96%E9%A1%B9%E7%9B%AE-%E6%B7%BB%E5%8A%A0umi%E4%BE%9D%E8%B5%96"><span class="nav-text">2. 初始化项目,添加umi依赖</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-%E7%BC%96%E5%86%99HelloWorld%E7%A8%8B%E5%BA%8F"><span class="nav-text">3. 编写HelloWorld程序</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%9C%A8%E5%B7%A5%E7%A8%8B%E7%9A%84%E6%A0%B9%E7%9B%AE%E5%BD%95%E4%B8%8B%E6%96%B0%E5%BB%BAconfig-config-js"><span class="nav-text">在工程的根目录下新建config&#x2F;config.js</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%88%9B%E5%BB%BAHelloWorld-js%E9%A1%B5%E9%9D%A2%E6%96%87%E4%BB%B6"><span class="nav-text">创建HelloWorld.js页面文件</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%9E%84%E5%BB%BA%E5%92%8C%E9%83%A8%E7%BD%B2"><span class="nav-text">构建和部署</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%90%AF%E5%8A%A8%E6%9C%8D%E5%8A%A1%EF%BC%8C%E6%9F%A5%E7%9C%8B%E9%A1%B5%E9%9D%A2%E6%95%88%E6%9E%9C"><span class="nav-text">启动服务，查看页面效果</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%B7%BB%E5%8A%A0-umi-plugin-react-%E6%8F%92%E4%BB%B6"><span class="nav-text">添加 umi-plugin-react 插件</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#JSX%E8%AF%AD%E6%B3%95"><span class="nav-text">JSX语法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BB%84%E4%BB%B6"><span class="nav-text">组件</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-%E8%87%AA%E5%AE%9A%E4%B9%89%E7%BB%84%E4%BB%B6"><span class="nav-text">1. 自定义组件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-%E5%AF%BC%E5%85%A5%E8%87%AA%E5%AE%9A%E4%B9%89%E7%BB%84%E4%BB%B6"><span class="nav-text">2. 导入自定义组件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%BB%84%E4%BB%B6%E5%8F%82%E6%95%B0"><span class="nav-text">组件参数</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%BB%84%E4%BB%B6%E7%9A%84%E7%8A%B6%E6%80%81"><span class="nav-text">组件的状态</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="nav-text">生命周期</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Model"><span class="nav-text">Model</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8dva%E8%BF%9B%E8%A1%8C%E6%95%B0%E6%8D%AE%E5%88%86%E5%B1%82%E7%AE%A1%E7%90%86"><span class="nav-text">使用dva进行数据分层管理</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1-%E5%BC%95%E5%85%A5dva%E6%A1%86%E6%9E%B6"><span class="nav-text">1. 引入dva框架</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-%E5%88%9B%E5%BB%BAmodel%E6%96%87%E4%BB%B6"><span class="nav-text">2. 创建model文件</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3-%E5%B0%86model%E5%B1%82%E6%95%B0%E6%8D%AE%E5%AF%BC%E5%85%A5page%E5%B1%82"><span class="nav-text">3. 将model层数据导入page层</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#4-%E6%9B%B4%E6%96%B0model%E4%B8%AD%E5%AE%9A%E4%B9%89%E7%9A%84%E6%95%B0%E6%8D%AE"><span class="nav-text">4. 更新model中定义的数据</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Model%E4%B8%AD%E5%BC%82%E6%AD%A5%E8%AF%B7%E6%B1%82%E6%95%B0%E6%8D%AE"><span class="nav-text">Model中异步请求数据</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1-%E8%AF%B7%E6%B1%82%E5%B7%A5%E5%85%B7%E7%B1%BB"><span class="nav-text">1. 请求工具类</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-model%E5%B1%82%E6%B7%BB%E5%8A%A0%E5%BC%82%E6%AD%A5%E8%AF%B7%E6%B1%82"><span class="nav-text">2. model层添加异步请求</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3-%E7%BB%91%E5%AE%9Amodel%E8%B0%83%E7%94%A8%E5%BC%82%E6%AD%A5%E8%AF%B7%E6%B1%82"><span class="nav-text">3. 绑定model调用异步请求</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#4-moke%E6%95%B0%E6%8D%AE"><span class="nav-text">4. moke数据</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#umi-model-%E6%B3%A8%E5%86%8C"><span class="nav-text">umi - model 注册</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#model%E7%A4%BA%E4%BE%8B"><span class="nav-text">model示例</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#umi-model%E6%B3%A8%E5%86%8C"><span class="nav-text">umi model注册</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#React%E6%A1%86%E6%9E%B6%E5%88%86%E7%B1%BB"><span class="nav-text">React框架分类</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#AntDesign"><span class="nav-text">AntDesign</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AE%80%E4%BB%8B-1"><span class="nav-text">简介</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE%E5%BC%80%E5%90%AFantd"><span class="nav-text">配置开启antd</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Tabs"><span class="nav-text">Tabs</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B8%83%E5%B1%80"><span class="nav-text">布局</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%90%AD%E5%BB%BA%E6%95%B4%E4%BD%93%E6%A1%86%E6%9E%B6-%E5%AD%90%E9%A1%B5%E9%9D%A2%E4%BD%BF%E7%94%A8%E5%B8%83%E5%B1%80"><span class="nav-text">搭建整体框架+子页面使用布局</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E9%85%8D%E7%BD%AE%E5%B8%83%E5%B1%80%E8%B7%AF%E7%94%B1"><span class="nav-text">自定义配置布局路由</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%A1%B5%E9%9D%A2%E7%BE%8E%E5%8C%96"><span class="nav-text">页面美化</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AF%BC%E8%88%AA%E8%8F%9C%E5%8D%95"><span class="nav-text">导航菜单</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%89%E8%A3%85%E5%9B%BE%E6%A0%87%E7%BB%84%E4%BB%B6%E5%8C%85"><span class="nav-text">安装图标组件包</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AF%BC%E8%88%AA%E6%B7%BB%E5%8A%A0%E9%93%BE%E6%8E%A5"><span class="nav-text">导航添加链接</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%A1%A8%E6%A0%BC"><span class="nav-text">表格</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95"><span class="nav-text">基本用法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E5%88%86%E7%A6%BB%E5%88%B0model"><span class="nav-text">数据分离到model</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#1-%E6%96%B0%E5%BB%BAmodel%E5%B1%82"><span class="nav-text">1. 新建model层</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#2-mock%E6%95%B0%E6%8D%AE"><span class="nav-text">2. mock数据</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#3-%E4%BF%AE%E6%94%B9UserList-jsx%E9%80%BB%E8%BE%91"><span class="nav-text">3. 修改UserList.jsx逻辑</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#4-%E6%96%B0%E5%A2%9E%E8%AF%B7%E6%B1%82"><span class="nav-text">4. 新增请求</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Ant-Design-Pro"><span class="nav-text">Ant Design Pro</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AE%80%E4%BB%8B-2"><span class="nav-text">简介</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%83%A8%E7%BD%B2%E5%92%8C%E5%AE%89%E8%A3%85"><span class="nav-text">部署和安装</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-%E4%B8%8B%E8%BD%BD%E6%BA%90%E7%A0%81-amp-%E8%A7%A3%E5%8E%8B"><span class="nav-text">1. 下载源码&amp;解压</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-%E5%AF%BC%E5%85%A5"><span class="nav-text">2. 导入</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-%E5%88%9D%E5%A7%8B%E5%8C%96%E5%8F%8A%E5%90%AF%E5%8A%A8"><span class="nav-text">3. 初始化及启动</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%8F%9C%E5%8D%95%E5%92%8C%E8%B7%AF%E7%94%B1"><span class="nav-text">菜单和路由</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%8F%9C%E5%8D%95%E6%98%AF%E7%94%B1%E8%B7%AF%E7%94%B1%E7%9A%84%E9%85%8D%E7%BD%AE%E7%94%9F%E6%88%90%E7%9A%84"><span class="nav-text">菜单是由路由的配置生成的</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%9C%A8%E5%9B%BD%E9%99%85%E5%8C%96%E6%96%87%E4%BB%B6%E4%B8%AD%E9%85%8D%E7%BD%AE%E6%96%87%E5%AD%97"><span class="nav-text">在国际化文件中配置文字</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%96%B0%E5%A2%9E%E9%A1%B5%E9%9D%A2"><span class="nav-text">新增页面</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Pro%E4%B8%ADmodel%E6%89%A7%E8%A1%8C%E6%B5%81%E7%A8%8B"><span class="nav-text">Pro中model执行流程</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%B7%AF%E7%94%B1%E5%8D%B3%E8%8F%9C%E5%8D%95"><span class="nav-text">路由即菜单</span></a></li></ol></li></ol></li></ol></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="site-author-image" itemprop="image" alt="AmosTian" src="/images/avatar.png"><p class="site-author-name" itemprop="name">AmosTian</p><div class="site-description" itemprop="description">知道的越多，不知道的越多</div></div><div class="site-state-wrap motion-element"><nav class="site-state"><div class="site-state-item site-state-posts"><a href="/archives/"><span class="site-state-item-count">354</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"><a href="/categories/"><span class="site-state-item-count">58</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"><a href="/tags/"><span class="site-state-item-count">74</span> <span class="site-state-item-name">标签</span></a></div></nav></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="https://github.com/AmosTian" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;AmosTian" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a> </span><span class="links-of-author-item"><a href="https://blog.csdn.net/qq_40479037?type=blog" title="CSDN → https:&#x2F;&#x2F;blog.csdn.net&#x2F;qq_40479037?type&#x3D;blog" rel="noopener" target="_blank"><i class="fa fa-fw fa-crosshairs"></i>CSDN</a> </span><span class="links-of-author-item"><a href="mailto:17636679561@163.com" title="E-Mail → mailto:17636679561@163.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a></span></div></div><div id="days"></div><script>function show_date_time(){window.setTimeout("show_date_time()",1e3),BirthDay=new Date("01/27/2022 15:13:14"),today=new Date,timeold=today.getTime()-BirthDay.getTime(),sectimeold=timeold/1e3,secondsold=Math.floor(sectimeold),msPerDay=864e5,e_daysold=timeold/msPerDay,daysold=Math.floor(e_daysold),e_hrsold=24*(e_daysold-daysold),hrsold=setzero(Math.floor(e_hrsold)),e_minsold=60*(e_hrsold-hrsold),minsold=setzero(Math.floor(60*(e_hrsold-hrsold))),seconds=setzero(Math.floor(60*(e_minsold-minsold))),document.getElementById("days").innerHTML="已运行 "+daysold+" 天 "+hrsold+" 小时 "+minsold+" 分 "+seconds+" 秒"}function setzero(e){return e<10&&(e="0"+e),e}show_date_time()</script></div></aside><div id="sidebar-dimmer"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright">&copy; <span itemprop="copyrightYear">2024</span> <span class="with-love"><i class="fa fa-grav"></i> </span><span class="author" itemprop="copyrightHolder">AmosTian</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-area-chart"></i> </span><span class="post-meta-item-text">站点总字数 </span><span title="站点总字数">795.8k</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-coffee"></i> </span><span class="post-meta-item-text">站点阅读时长 &asymp;</span> <span title="站点阅读时长">33:15</span></div></div></footer></div><script color="0,0,0" opacity="0.5" zindex="-1" count="150" src="/lib/canvas-nest/canvas-nest.min.js"></script><script src="/lib/anime.min.js"></script><script src="//cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><script src="//cdn.jsdelivr.net/gh/fancyapps/fancybox@3/dist/jquery.fancybox.min.js"></script><script src="/js/utils.js"></script><script src="/js/schemes/pisces.js"></script><script src="/js/next-boot.js"></script><script>!function(){var t=document.createElement("script"),e=window.location.protocol.split(":")[0];t.src="https"===e?"https://zz.bdstatic.com/linksubmit/push.js":"http://push.zhanzhang.baidu.com/push.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(t,s)}()</script><script src="/js/local-search.js"></script><script>if (document.querySelectorAll('pre.mermaid').length) {
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/mermaid@8/dist/mermaid.min.js', () => {
    mermaid.initialize({
      theme    : 'neutral',
      logLevel : 3,
      flowchart: { curve     : 'linear' },
      gantt    : { axisFormat: '%m/%d/%Y' },
      sequence : { actorMargin: 50 }
    });
  }, window.mermaid);
}</script><script>if (typeof MathJax === 'undefined') {
    window.MathJax = {
      loader: {
          load: ['[tex]/mhchem'],
        source: {
          '[tex]/amsCd': '[tex]/amscd',
          '[tex]/AMScd': '[tex]/amscd'
        }
      },
      tex: {
        inlineMath: {'[+]': [['$', '$']]},
          packages: {'[+]': ['mhchem']},
        tags: 'ams'
      },
      options: {
        renderActions: {
          findScript: [10, doc => {
            document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
              const display = !!node.type.match(/; *mode=display/);
              const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
              const text = document.createTextNode('');
              node.parentNode.replaceChild(text, node);
              math.start = {node: text, delim: '', n: 0};
              math.end = {node: text, delim: '', n: 0};
              doc.math.push(math);
            });
          }, '', false],
          insertedScript: [200, () => {
            document.querySelectorAll('mjx-container').forEach(node => {
              let target = node.parentNode;
              if (target.nodeName.toLowerCase() === 'li') {
                target.parentNode.classList.add('has-jax');
              }
            });
          }, '', false]
        }
      }
    };
    (function () {
      var script = document.createElement('script');
      script.src = '//cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js';
      script.defer = true;
      document.head.appendChild(script);
    })();
  } else {
    MathJax.startup.document.state(0);
    MathJax.texReset();
    MathJax.typeset();
  }</script><script async src="/js/cursor/fireworks.js"></script><script src="/js/activate-power-mode.min.js"></script><script>POWERMODE.colorful=!0,POWERMODE.shake=!1,document.body.addEventListener("input",POWERMODE)</script><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({pluginRootPath:"live2dw/",pluginJsPath:"lib/",pluginModelPath:"assets/",tagMode:!1,model:{jsonPath:"live2d-widget-model-hijiki"},display:{position:"right",width:150,height:300},mobile:{show:!1},log:!1})</script></body></html>